(this["webpackJsonpcarrot-hr"]=this["webpackJsonpcarrot-hr"]||[]).push([[0],{51:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a(7),s=a(24),i=a(25),o=a(31),m=a(30),u=a(71),E=a(72),d=a(17),h=a(69),y=a(66),f=a(67),p=a(48),b=a(70),_=a(68),g=["mon","tue","wed","thu","fri","sat","sun"],v={mon:"Poniedzia\u0142ek",tue:"Wtorek",wed:"\u015aroda",thu:"Czwartek",fri:"Piatek",sat:"Sobota",sun:"Niedziela"},k=function(e){return v[e]},O={mon:"PN",tue:"WT",wed:"\u015aR",thu:"CZ",fri:"PT",sat:"SB",sun:"ND"};var w=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],s=Object(c.c)(),i=Object(c.d)((function(e){return e.settings})),o=i.daily_time,m=i.daily_break,u=i.weekly_break,v=i.free_days,O=i.shifts_crew;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:"mr-4",variant:"outline-warning",onClick:function(){return l(!0)}},r.a.createElement("b",null," Ustawienia ")),r.a.createElement(h.a,{show:a,onHide:function(){return l(!1)},size:"lg"},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Panel Carrot",r.a.createElement("b",null,"HR"))),r.a.createElement(h.a.Body,null,r.a.createElement(y.a,null,r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:9,lg:10},"Maksymalny dzienny czas pracy:"),r.a.createElement(p.a,{sm:3,lg:2},r.a.createElement(b.a.Control,{className:"text-center",type:"text",placeholder:"0:00",value:o,onChange:function(e){return s({type:"DAILY_TIME",value:e.target.value})}}))),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:9,lg:10},"Minimalna przerwa mi\u0119dzy zmianami:"),r.a.createElement(p.a,{sm:3,lg:2},r.a.createElement(b.a.Control,{className:"text-center",type:"text",placeholder:"0:00",value:m,onChange:function(e){return s({type:"DAILY_BREAK",value:e.target.value})}}))),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:9,lg:10},"Minimalna tygodniowa przerwa:"),r.a.createElement(p.a,{sm:3,lg:2},r.a.createElement(b.a.Control,{className:"text-center",type:"text",placeholder:"0:00",value:u,onChange:function(e){return s({type:"WEEKLY_BREAK",value:e.target.value})}}))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"show-grid align-items-center mb-3"},r.a.createElement(p.a,{xs:12,className:"mb-1"}," Dni wolne: "),g.map((function(e){return r.a.createElement(p.a,{xs:6,md:4,lg:3},r.a.createElement(b.a.Check,{className:"pt-1",type:"checkbox",id:"checkbox-".concat(e),label:"".concat(k(e)),onChange:function(t){return s({type:"FREE_DAYS",key:e,value:t.target.checked})},checked:null!==v[e],custom:!0}))}))),Object.entries(v).map((function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];if(null!==n)return r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,null,k(a)),r.a.createElement(p.a,{xs:3,lg:2},r.a.createElement(b.a.Control,{className:"text-center",type:"text",size:"sm",value:n.index,onChange:function(e){return s({type:"FREE_DAYS_INDEX",key:a,value:e.target.value})}})),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a.Check,{type:"checkbox",id:"checkbox-".concat(a,"-permanent"),label:"Sta\u0142e",onChange:function(e){return s({type:"FREE_DAYS_PERMANENT",key:a,value:e.target.checked})},checked:n.permanent,custom:!0})),r.a.createElement(p.a,{xs:12}))})),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,null," Minimalna za\u0142oga pracownicza: ")),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{xs:12},r.a.createElement(_.a,{bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Zmiana:"),r.a.createElement("th",{className:"text-center w-15"},"I"),r.a.createElement("th",{className:"text-center w-15"},"II"),r.a.createElement("th",{className:"text-center w-15"},"III"))),r.a.createElement("tbody",null,["mon","tue","wed","thu","fri","sat","sun"].map((function(e){if(null===v[e]||null!==v[e]&&!1===v[e].permanent)return r.a.createElement("tr",null,r.a.createElement("td",null,k(e)),r.a.createElement("td",{className:"text-center w-15"},r.a.createElement(b.a.Control,{className:"text-center",type:"text",size:"sm",value:O[e].shift_1,onChange:function(t){return s({type:"SHIFTS_CREW",key:e,shift:"shift_1",value:t.target.value})}})),r.a.createElement("td",{className:"text-center w-15"},r.a.createElement(b.a.Control,{className:"text-center",type:"text",size:"sm",value:O[e].shift_2,onChange:function(t){return s({type:"SHIFTS_CREW",key:e,shift:"shift_2",value:t.target.value})}})),r.a.createElement("td",{className:"text-center w-15"},r.a.createElement(b.a.Control,{className:"text-center",type:"text",size:"sm",value:O[e].shift_3,onChange:function(t){return s({type:"SHIFTS_CREW",key:e,shift:"shift_3",value:t.target.value})}})))})))))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"show-grid align-items-center mb-3"},r.a.createElement(p.a,{xs:12,className:"mb-1"}," Dni ustawowo wolne: ")))),r.a.createElement(h.a.Footer,null,r.a.createElement(E.a,{onClick:function(){return l(!1)}}," Zamknij "))))},N=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleOnLoaderChange=function(t){var a=new FileReader;a.onload=function(t){return function(){var a=JSON.parse(t.result);e.props.onLoaded(a)}}(a),a.readAsText(t.target.files[0]),t.target.value=""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.is_absences_layer,n=t.is_time_layer,l=t.onSave,c=t.onGenerate,s=t.onClear,i=t.onAbsences,o=t.onWorkTime,m=t.onUndo,d=t.onRedo;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{bg:"light"},r.a.createElement(w,null),r.a.createElement(E.a,{className:"mr-2",variant:"outline-dark",onClick:l},r.a.createElement("b",null," Zapisz ")),r.a.createElement(E.a,{className:"mr-4",variant:"outline-dark",type:"input",onClick:function(){e.fileUploader.click()}},r.a.createElement("b",null," Wczytaj ")),r.a.createElement(E.a,{className:"mr-2",variant:"outline-success",onClick:c},r.a.createElement("b",null," Generuj ")),r.a.createElement(E.a,{className:"mr-4",variant:"outline-danger",onClick:s},r.a.createElement("b",null," Wyczy\u015b\u0107 ")),r.a.createElement(E.a,{className:"mr-2 text-nowrap",variant:"outline-info",onClick:i},r.a.createElement("b",null,!1===a?"Poka\u017c absencje":"Ukryj absencje")),r.a.createElement(E.a,{className:"mr-4 text-nowrap",variant:"outline-info",onClick:o},r.a.createElement("b",null,!1===n?"Poka\u017c czas pracy":"Ukryj czas pracy")),r.a.createElement(E.a,{className:"mr-2",variant:"outline-dark",onClick:m},r.a.createElement("b",null," Cofnij ")),r.a.createElement(E.a,{className:"mr-2",variant:"outline-dark",onClick:d},r.a.createElement("b",null," Przywr\xf3\u0107 ")),r.a.createElement("input",{ref:function(t){return e.fileUploader=t},className:"d-none",type:"file",onChange:function(t){return e.handleOnLoaderChange(t)}})))}}]),a}(n.Component),C=N=Object(c.b)((function(e){return{is_absences_layer:e.settings.is_absences_layer,is_time_layer:e.settings.is_time_layer}}),(function(e){return{onSave:function(){return e({type:"SAVE"})},onLoaded:function(t){return e({type:"LOADED",payload:t})},onGenerate:function(){return e({type:"GENERATE"})},onClear:function(){return e({type:"CLEAR"})},onAbsences:function(){return e({type:"ABSENCES"})},onWorkTime:function(){return e({type:"WORK_TIME"})},onUndo:function(){return e({type:"UNDO"})},onRedo:function(){return e({type:"REDO"})}}}))(N),j=a(42),x=function(e){var t,a,n,l,s=Object(c.c)();return r.a.createElement(h.a,{show:e.modalShow,onHide:e.onHide,size:"lg"},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Panel - ",null===(t=e.employee)||void 0===t?void 0:t.signature)),r.a.createElement(h.a.Body,null,r.a.createElement(y.a,null,r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:6,lg:8}," Dane personalne: "),r.a.createElement(p.a,{sm:6,lg:4},r.a.createElement(b.a.Control,{type:"text",value:null===(a=e.employee)||void 0===a?void 0:a.signature,onChange:function(t){return s({type:"EMPLOYEE_UPDATE",id:e.employee_id,field:"signature",value:t.target.value})}}))),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:6,lg:8}," Wymiar czasu pracy: "),r.a.createElement(p.a,{sm:6,lg:4},r.a.createElement(b.a.Control,{as:"select",value:null===(n=e.employee)||void 0===n?void 0:n.time_contract,onChange:function(t){return s({type:"EMPLOYEE_UPDATE",id:e.employee_id,field:"time_contract",value:t.target.value})},custom:!0},r.a.createElement("option",{value:1},"Pe\u0142ny etat"),r.a.createElement("option",{value:.75},"3/4 etatu"),r.a.createElement("option",{value:.5},"P\xf3\u0142 etatu"),r.a.createElement("option",{value:.25},"\u0106wier\u0107 etatu")))),r.a.createElement(f.a,{className:"show-grid align-items-center mb-2"},r.a.createElement(p.a,{sm:6,lg:8}," Stanowisko: "),r.a.createElement(p.a,{sm:6,lg:4},r.a.createElement(b.a.Control,{type:"text",value:null===(l=e.employee)||void 0===l?void 0:l.role,onChange:function(t){return s({type:"EMPLOYEE_UPDATE",id:e.employee_id,field:"role",value:t.target.value.toUpperCase()})}}))))),r.a.createElement(h.a.Footer,null,r.a.createElement(E.a,{variant:"danger",onClick:e.onHide}," Usu\u0144 "),r.a.createElement(E.a,{onClick:e.onHide}," Zamknij ")))},A=r.a.memo((function(e){return r.a.createElement("td",{className:"text-center align-middle p-0"},r.a.createElement(b.a.Control,{className:"carrotHR__input",type:"text",size:"sm"}),r.a.createElement(b.a.Control,{className:"carrotHR__input",type:"text",size:"sm"}))})),S=r.a.memo((function(e){var t=Object(c.d)((function(e){return e.dates}));return r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},e.no),r.a.createElement("th",{className:"text-nowrap",onClick:e.onSignatureClick},e.employee.signature),t.map((function(e){return r.a.createElement(A,null)})))}));var R=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(0),i=Object(d.a)(s,2),o=i[0],m=i[1],u=Object(c.c)(),E=(Object(c.d)((function(e){return e.schedules})).schedules,Object(c.d)((function(e){return e.dates}))),h=Object(c.d)((function(e){return e.employees}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{employee:h[o],employee_id:o,modalShow:a,onHide:function(){return l(!1)}}),r.a.createElement(_.a,{className:"carrotHR__table mb-0",striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",{className:"carrotHR__signature"},"Pracownik"),E.map((function(e){return r.a.createElement("th",{className:"text-nowrap text-center p-0"},r.a.createElement("span",{className:"px-3"},j(e).format("MM-DD")),r.a.createElement("hr",{className:"m-0"}),r.a.createElement("span",{className:"px-3"},(t=j(e).format("ddd").toLowerCase(),O[t])));var t})))),r.a.createElement("tbody",null,Object.entries(h).map((function(e,t){var a=Object(d.a)(e,2),n=a[0],c=a[1];return r.a.createElement(S,{no:t+1,employee:c,employee_id:n,onSignatureClick:function(){m(n),l(!0)}})})),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"#"),r.a.createElement("th",{className:"text-nowrap"},r.a.createElement(b.a.Control,{type:"text",size:"sm",placeholder:"DODAJ PRACOWNIKA",onKeyDown:function(e){"Enter"===e.key&&(u({type:"EMPLOYEE_CREATE",value:e.target.value}),e.target.value="")}})),E.map((function(e){return r.a.createElement("td",{className:"text-center"}," ")}))))))},D=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(R,null))}}]),a}(n.Component),z=(a(63),a(21)),T=a(6),I=(a(42),a(38)),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GENERATE":return(e=e.slice()).push({id:"#"+Math.floor(16777215*Math.random()).toString(16),status:"success"}),console.log(e),Object(I.a)(e);case"CLEAR":return(e=e.slice()).length=0,Object(I.a)(e);default:return e}},M={is_absences_layer:!1,is_time_layer:!1,daily_time:"12:00",daily_break:"13:00",weekly_break:"35:00",free_days:{mon:null,tue:null,wed:null,thu:null,fri:null,sat:{index:"SB",permanent:!1},sun:{index:"ND",permanent:!0}},shifts_crew:{sun:{shift_1:0,shift_2:0},mon:{shift_1:5,shift_2:5},tue:{shift_1:4,shift_2:4},wed:{shift_1:5,shift_2:4},thu:{shift_1:4,shift_2:4},fri:{shift_1:4,shift_2:4},sat:{shift_1:5,shift_2:4}}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DAILY_TIME":return Object(T.a)(Object(T.a)({},e),{},{daily_time:t.value});case"DAILY_TIME":return Object(T.a)(Object(T.a)({},e),{},{daily_break:t.value});case"DAILY_TIME":return Object(T.a)(Object(T.a)({},e),{},{weekly_break:t.value});case"FREE_DAYS":var a=e.free_days;return g.includes(t.key)&&(!0===t.value?a[t.key]={index:"".concat(t.key.toUpperCase()),permanent:!0}:a[t.key]=null),Object(T.a)(Object(T.a)({},e),{},{free_days:a});case"FREE_DAYS_INDEX":var n=e.free_days;return g.includes(t.key)&&(n[t.key].index=t.value),Object(T.a)(Object(T.a)({},e),{},{free_days:n});case"FREE_DAYS_PERMANENT":var r=e.free_days;return g.includes(t.key)&&(r[t.key].permanent=t.value),Object(T.a)(Object(T.a)({},e),{},{free_days:r});case"SHIFTS_CREW":var l=e.shifts_crew;return g.includes(t.key)&&(l[t.key][t.shift]=t.value),Object(T.a)(Object(T.a)({},e),{},{shifts_crew:l});case"ABSENCES":return e.is_absences_layer=!e.is_absences_layer,e.is_time_layer=!1,Object(T.a)({},e);case"WORK_TIME":return e.is_absences_layer=!1,e.is_time_layer=!e.is_time_layer,Object(T.a)({},e);default:return e}},W=a(20),Y={},F=1,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EMPLOYEE_CREATE":return Object(T.a)(Object(T.a)({},e),{},Object(W.a)({},F++,{signature:t.value,time_contract:1,role:"PRACOWNIK"}));case"EMPLOYEE_UPDATE":return Object(T.a)(Object(T.a)({},e),{},Object(W.a)({},t.id,Object(T.a)(Object(T.a)({},e[t.id]),{},Object(W.a)({},t.field,t.value))));default:return e}},U=["2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30"],B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return t.type,e},K=Object(z.b)({schedules:P,employees:H,settings:L,dates:B}),G=Object(z.c)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(l.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:G},r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.67c9ad9b.chunk.js.map