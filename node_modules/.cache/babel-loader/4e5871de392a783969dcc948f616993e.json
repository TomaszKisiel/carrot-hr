{"ast":null,"code":"var _jsxFileName = \"/home/tomek/social-media/carrot-studio/CarrotHR/src/Components/App.js\";\nimport React, { Component } from 'react';\nimport EmployeesTableManager from './EmployeesTableManager';\nimport SettingsManager from './SettingsManager';\nimport * as Helpers from './Helpers.js';\nimport './App.scss';\n\nconst format = require('date-format'); // + ZROBIONE\n// ~ PRAWIE ZROBIONE\n// ! NASTĘPNE W PLANIE\n// [+] TODO 2 : Zapis i odczyt stanu menadżera tabeli do/z pliku\n// [+] TODO 3 : Zapis preferencji po edytowaniu pola, przypisanie polu oznaczenia preferencji\n// [+] TODO 4 : Auto generowanie planu pracy na podstawie preferencji\n// [ ] TODO 5 : Poprzenosic wszystkie kompo-funkcje do osobnych plików\n// [+] TODO 6 : Cieszyc sie że choć jeden projekt posuwa się do przodu :3\n// [~] TODO 7 : Przygotować szablon ustawień\n// [+] TODO 8 : Zablokować możliwość edycji dni wolnych od pracy\n// [ ] TODO 9 : Automatyczne generowanie dat według kwartału ustawionego w ustawieniach\n// [+] TODO 10 : Oznaczenie świąt\n// [ ] TODO 11 : Zwracanie dnia wolnego za sobotę.\n// [!] TODO 12 : Przygotowanie modal'a z wszystkimi ustawieniami\n// [ ] TODO 13 : Ujmowanie czasu pracy pracownikom z preferencjami\n\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validateAllSchedules = employee_id => {\n      // Poprawność leksykalna wpisu\n      const schedules_temp = [...this.state.schedules].filter(schedule => {\n        return schedule.employee_id === employee_id;\n      });\n\n      for (const schedule of schedules_temp) {\n        schedule.validation.is_valid = true;\n        let scheduleBegin = schedule.begin;\n        let scheduleEnd = schedule.end;\n\n        if (!(Helpers.timeValidator(scheduleBegin) || Helpers.shiftValidator(scheduleBegin))) {\n          schedule.validation.is_valid = false;\n          schedule.validation.reason = \"Nieprawidłowy format czasu.\";\n        }\n\n        if (Helpers.timeValidator(scheduleBegin) && !Helpers.timeValidator(scheduleEnd)) {\n          schedule.validation.is_valid = false;\n          schedule.validation.reason = \"Nieprawidłowy format czasu.\";\n        }\n      } // Poprawność czasu pracy\n\n\n      let preventDate = null;\n      let currentDate = null;\n      let preventSchedule = null;\n      let currentSchedule = null;\n      const weeks = chunk([...this.state.dates], 7);\n\n      for (const week of weeks) {\n        let isWeaklyBreak = false;\n\n        for (const date of week) {\n          let isDailyBreak = false; // Przerwa między dniami pracy\n\n          let isDailyTime = false; // Maksymalny czas pracy na zmianie\n\n          if (currentDate != null) {\n            preventDate = currentDate;\n          }\n\n          currentDate = date;\n          const schedule = schedule_temp.filter(schedule => {\n            return schedule.date == currentDate;\n          });\n        }\n      } // const employees = [ ...this.state.employees ].filter(employee => { return ( employee.id == employee_id ) });\n      //\n      // const weeks = chunk( [ ...this.state.dates ], 7 );\n      // for ( const employee of employees ) {\n      // \tlet preventDate = null;\n      // \tlet currentDate = null;\n      // \tlet preventSchedule = null;\n      // \tlet currentSchedule = null;\n      // \tfor ( const week of weeks ) {\n      //\n      // \t\tlet isWeaklyBreak = false;\n      // \t\tfor ( const date of week ) {\n      //\n      // \t\t\tlet isDailyBreak = false;\n      // \t\t\tif ( currentDate === null ) {\n      // \t\t\t\tcurrentDate = date;\n      // \t\t\t\tcontinue;\n      // \t\t\t} else {\n      // \t\t\t\tpreventDate = currentDate;\n      // \t\t\t\tcurrentDate = date;\n      //\n      // \t\t\t\tconsole.log(preventDate, currentDate);\n      // \t\t\t\t// if ( currentSchedule === null ) {\n      // \t\t\t\t// \tcurrentSchedule = this.state.schedules.find(schedule => { return ( schedule.employee_id === employee_id && schedule.date === currentDate ) });\n      // \t\t\t\t// \tcontinue;\n      // \t\t\t\t// } else {\n      // \t\t\t\t// \tpreventSchedule = currentSchedule;\n      // \t\t\t\t// \tcurrentSchedule = this.state.schedules.find(schedule => { return ( schedule.employee_id === employee_id && schedule.date === currentDate ) });\n      // \t\t\t\t//\n      // \t\t\t\t// \tif ( currentSchedule != null ) {\n      // \t\t\t\t//\n      // \t\t\t\t//\n      // \t\t\t\t// }\n      // \t\t\t}\n      // \t\t}\n      // \t\treturn;\n      // \t}\n      // }\n      // this.setState({ schedules: schedules_temp });\n\n    };\n\n    this.state = {\n      settings: {\n        max_daily_time: 12,\n        // Maksymalny dzienny czas pracy\n        daily_break: 13,\n        // Minimalna przerwa miedzy kolejnymi zmianami\n        weaky_break: 35,\n        // minimalna przerwa w tygodniu\n        free_indexs: [// Wpisy które ujmują 8h pracy\n        \"NP\", \"SP\", \"L4\", \"UW\", \"DU\", \"ZZ\", \"UO\"],\n        free_days: {\n          // Ustawienia dni tygodnia, wolne i jego rodzaj\n          sun: {\n            shift: \"N\",\n            permanent: true\n          },\n          mon: null,\n          tue: null,\n          wed: null,\n          thu: null,\n          fri: null,\n          sat: {\n            shift: \"S\",\n            permanent: false\n          }\n        },\n        min_per_shift: {\n          // Minimalna załoga pracownicza na zmianie danego dnia\n          sun: {\n            shift_1: 0,\n            shift_2: 0,\n            shift_3: 0\n          },\n          mon: {\n            shift_1: 5,\n            shift_2: 5,\n            shift_3: 0\n          },\n          tue: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          wed: {\n            shift_1: 5,\n            shift_2: 4,\n            shift_3: 0\n          },\n          thu: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          fri: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          sat: {\n            shift_1: 5,\n            shift_2: 4,\n            shift_3: 0\n          }\n        },\n        holidays: [// Święta ustawowo wolne\n        {\n          date: \"2020-01-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-01-06\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-04-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-04-13\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-03\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-31\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-06-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-08-15\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-11-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-11-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-12-25\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-12-16\",\n          shift: \"WS\"\n        }],\n        is_absences_layer: false,\n        is_time_layer: false\n      },\n      employee_next_id: 14,\n      employees: [// {\tid: 0,\tsignature: \"Adam Nowak\",\ttime_contract: 1,\troles: []\t},\n      {\n        id: 1,\n        signature: \"Adam Nowak\",\n        time_contract: 1,\n        roles: [\"KASJER\"]\n      }, {\n        id: 2,\n        signature: \"Hubert Lipa\",\n        time_contract: 1,\n        roles: [\"KASJER\"]\n      }, {\n        id: 3,\n        signature: \"Karolina Pama\",\n        time_contract: 1,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 4,\n        signature: \"Dawid Zsiadło\",\n        time_contract: 1,\n        roles: [\"STARSZY KASJER\"]\n      }, {\n        id: 5,\n        signature: \"Andrzej Jawor\",\n        time_contract: 1,\n        roles: [\"KIEROWNIK\"]\n      }, {\n        id: 6,\n        signature: \"Tomasz Budyń\",\n        time_contract: 1,\n        roles: [\"KASJER\"]\n      }, {\n        id: 7,\n        signature: \"Joanna Kwas\",\n        time_contract: .75,\n        roles: [\"KASJER\"]\n      }, {\n        id: 8,\n        signature: \"Adam Małysz\",\n        time_contract: .75,\n        roles: [\"KASJER\"]\n      }, {\n        id: 9,\n        signature: \"Kawaii Omate\",\n        time_contract: 1,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 10,\n        signature: \"Siergiej Oli\",\n        time_contract: 1,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 11,\n        signature: \"Jan Polak\",\n        time_contract: 1,\n        roles: [\"KASJER\"]\n      }, {\n        id: 12,\n        signature: \"Hans Niemiec\",\n        time_contract: 1,\n        roles: [\"KASJER\"]\n      }, {\n        id: 13,\n        signature: \"John States\",\n        time_contract: .5,\n        roles: [\"KASJER\"]\n      }],\n      dates: [\"2020-04-01\", \"2020-04-02\", \"2020-04-03\", \"2020-04-04\", \"2020-04-05\", \"2020-04-06\", \"2020-04-07\", \"2020-04-08\", \"2020-04-09\", \"2020-04-10\", \"2020-04-11\", \"2020-04-12\", \"2020-04-13\", \"2020-04-14\", \"2020-04-15\", \"2020-04-16\", \"2020-04-17\", \"2020-04-18\", \"2020-04-19\", \"2020-04-20\", \"2020-04-21\", \"2020-04-22\", \"2020-04-23\", \"2020-04-24\", \"2020-04-25\", \"2020-04-26\", \"2020-04-27\", \"2020-04-28\", \"2020-04-29\", \"2020-04-30\", \"2020-05-01\", \"2020-05-02\", \"2020-05-03\", \"2020-05-04\", \"2020-05-05\", \"2020-05-06\", \"2020-05-07\", \"2020-05-08\", \"2020-05-09\", \"2020-05-10\", \"2020-05-11\", \"2020-05-12\", \"2020-05-13\", \"2020-05-14\", \"2020-05-15\", \"2020-05-16\", \"2020-05-17\", \"2020-05-18\", \"2020-05-19\", \"2020-05-20\", \"2020-05-21\", \"2020-05-22\", \"2020-05-23\", \"2020-05-24\", \"2020-05-25\", \"2020-05-26\", \"2020-05-27\", \"2020-05-28\", \"2020-05-29\", \"2020-05-30\", \"2020-05-31\", \"2020-06-01\", \"2020-06-02\", \"2020-06-03\", \"2020-06-04\", \"2020-06-05\", \"2020-06-06\", \"2020-06-07\", \"2020-06-08\", \"2020-06-09\", \"2020-06-10\", \"2020-06-11\", \"2020-06-12\", \"2020-06-13\", \"2020-06-14\", \"2020-06-15\", \"2020-06-16\", \"2020-06-17\", \"2020-06-18\", \"2020-06-19\", \"2020-06-21\", \"2020-06-22\", \"2020-06-23\", \"2020-06-24\", \"2020-06-25\", \"2020-06-26\", \"2020-06-27\", \"2020-06-28\", \"2020-06-29\", \"2020-06-30\"],\n      // preferences: [],\n      schedules: [// { \temployee_id: 0, \tdate: \"03-04-2020\", \tbegin: \"06:00:00\",\t\tend: \"14:00:00\",\tpreference: false \t},\n      ],\n      absences: [// {\temployee_id: 0,\t\tdate: \"03-04-2020\",\t\tindex: \"L4\"  }\n      ]\n    };\n    this.handleOnSaveClick = this.handleOnSaveClick.bind(this);\n    this.handleOnUploadClick = this.handleOnUploadClick.bind(this);\n    this.handleOnUploadChange = this.handleOnUploadChange.bind(this);\n    this.handleOnGenerateClick = this.handleOnGenerateClick.bind(this);\n    this.handleOnClearClick = this.handleOnClearClick.bind(this);\n    this.handleOnShowAbsencesClick = this.handleOnShowAbsencesClick.bind(this);\n    this.handleOnShowTimeClick = this.handleOnShowTimeClick.bind(this);\n    this.handleOnUndoClick = this.handleOnUndoClick.bind(this);\n    this.handleOnRedoClick = this.handleOnRedoClick.bind(this);\n    this.handleOnNewEmployee = this.handleOnNewEmployee.bind(this);\n    this.handleOnScheduleBeginChange = this.handleOnScheduleBeginChange.bind(this);\n    this.handleOnScheduleEndChange = this.handleOnScheduleEndChange.bind(this); // this.pushSchedule = this.pushSchedule.bind(this);\n  } // Tu trzeba będzie zrobić tak żeby sprawdzało tylko dla jednego pracownika bo to szkoda zachodu na niezainteresowanych\n\n\n  handleOnSaveClick() {\n    const element = document.createElement(\"a\");\n    const file = new Blob([JSON.stringify(this.state)], {\n      type: 'application/json'\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = format.asString('dd-MM-yyyy hh:mm', new Date());\n    document.body.appendChild(element);\n    element.click();\n  }\n\n  handleOnUploadClick() {\n    this.refs.fileUploader.click();\n  }\n\n  handleOnUploadChange(e) {\n    var reader = new FileReader();\n\n    reader.onload = (reader => {\n      return () => {\n        const json = JSON.parse(reader.result);\n        this.setState({\n          settings: json.settings,\n          employees: json.employees,\n          employee_next_id: json.employee_next_id,\n          schedules: json.schedules,\n          absences: json.absences\n        });\n      };\n    })(reader);\n\n    reader.readAsText(e.target.files[0]);\n  }\n\n  handleOnGenerateClick() {}\n\n  handleOnClearClick() {\n    this.setState({\n      schedules: []\n    });\n  }\n\n  handleOnShowAbsencesClick() {\n    let settings_temp = { ...this.state.settings\n    };\n    settings_temp.is_absences_layer = !settings_temp.is_absences_layer;\n    settings_temp.is_time_layer = false;\n    this.setState({\n      settings: { ...settings_temp\n      }\n    });\n  }\n\n  handleOnShowTimeClick() {\n    let settings_temp = { ...this.state.settings\n    };\n    settings_temp.is_time_layer = !settings_temp.is_time_layer;\n    settings_temp.is_absences_layer = false;\n    this.setState({\n      settings: { ...settings_temp\n      }\n    });\n  }\n\n  handleOnUndoClick() {}\n\n  handleOnRedoClick() {}\n\n  handleOnNewEmployee(e) {\n    if (e.key === \"Enter\") {\n      const employee = {\n        id: this.state.employee_next_id,\n        signature: e.target.value,\n        time_contract: 1,\n        roles: []\n      };\n      this.setState({\n        employees: [...this.state.employees, employee],\n        employee_next_id: this.state.employee_next_id + 1\n      });\n      e.target.value = \"\";\n    }\n  }\n\n  handleOnScheduleBeginChange(e) {\n    let employee_id = e.target.getAttribute('data-employee-id');\n    let schedules_temp = [...this.state.schedules];\n    schedules_temp = schedules_temp.filter(schedule => {\n      return !(schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id'));\n    });\n    let schedule_temp = [...this.state.schedules].find(schedule => {\n      return schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id');\n    });\n\n    if (e.target.value != \"\") {\n      const schedule = {\n        employee_id: parseInt(employee_id),\n        date: e.target.getAttribute('data-date-id'),\n        begin: e.target.value.toUpperCase(),\n        end: schedule_temp ? schedule_temp.end : \"\",\n        preference: true,\n        validation: {\n          is_valid: true // reason: \"\"\n\n        }\n      };\n      this.setState({\n        schedules: [...schedules_temp, schedule]\n      }, () => this.validateAllSchedules(parseInt(employee_id)));\n    } else {\n      this.setState({\n        schedules: [...schedules_temp]\n      }, () => this.validateAllSchedules(parseInt(employee_id)));\n    }\n  }\n\n  handleOnScheduleEndChange(e) {\n    let employee_id = e.target.getAttribute('data-employee-id');\n    let schedules_temp = [...this.state.schedules].filter(schedule => {\n      return !(schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id'));\n    });\n    let schedule = [...this.state.schedules].find(schedule => {\n      return schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id');\n    });\n    schedule.end = e.target.value;\n    this.setState({\n      schedules: [...schedules_temp, schedule]\n    }, () => this.validateAllSchedules(parseInt(employee_id)));\n  } // pushSchedule( p_schedule ) { }\n  // pushSchedules( p_schedules ) { }\n  // <button className=\"btn btn-outline-primary font-weight-bold mr-2\" type=\"button\">Pokaż preferencje</button>\n  // <button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearPreferencesClick }>Usuń preferencje</button>\n  // ustawienia - zapisz - wczytaj - generuj plan pracy - wyczysc plan pracy - pokaz/ukryj absencje - pokaz/ukryj czas pracy - cofnij - przywroc\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-light bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(SettingsManager, {\n      settings: this.state.settings,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnSaveClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 7\n      }\n    }, \"Zapisz\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnUploadClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 7\n      }\n    }, \"Wczytaj\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnGenerateClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 10\n      }\n    }, \"Generuj plan pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnClearClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 7\n      }\n    }, \"Wyczy\\u015B\\u0107 plan pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-info font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnShowAbsencesClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 7\n      }\n    }, this.state.settings.is_absences_layer === false ? \"Pokaż absencje\" : \"Ukryj absencje\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-info font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnShowTimeClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 7\n      }\n    }, this.state.settings.is_time_layer === false ? \"Pokaż czas pracy\" : \"Ukryj czas pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 7\n      }\n    }, \"Cofnij\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 10\n      }\n    }, \"Przywr\\xF3\\u0107\"), /*#__PURE__*/React.createElement(\"input\", {\n      ref: \"fileUploader\",\n      className: \"d-none\",\n      type: \"file\",\n      onChange: this.handleOnUploadChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(EmployeesTableManager, {\n      settings: this.state.settings,\n      employees: this.state.employees,\n      dates: this.state.dates,\n      schedules: this.state.schedules,\n      onNewEmployee: this.handleOnNewEmployee,\n      onScheduleBeginChange: this.handleOnScheduleBeginChange,\n      onScheduleEndChange: this.handleOnScheduleEndChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/tomek/social-media/carrot-studio/CarrotHR/src/Components/App.js"],"names":["React","Component","EmployeesTableManager","SettingsManager","Helpers","format","require","App","constructor","props","validateAllSchedules","employee_id","schedules_temp","state","schedules","filter","schedule","validation","is_valid","scheduleBegin","begin","scheduleEnd","end","timeValidator","shiftValidator","reason","preventDate","currentDate","preventSchedule","currentSchedule","weeks","chunk","dates","week","isWeaklyBreak","date","isDailyBreak","isDailyTime","schedule_temp","settings","max_daily_time","daily_break","weaky_break","free_indexs","free_days","sun","shift","permanent","mon","tue","wed","thu","fri","sat","min_per_shift","shift_1","shift_2","shift_3","holidays","is_absences_layer","is_time_layer","employee_next_id","employees","id","signature","time_contract","roles","absences","handleOnSaveClick","bind","handleOnUploadClick","handleOnUploadChange","handleOnGenerateClick","handleOnClearClick","handleOnShowAbsencesClick","handleOnShowTimeClick","handleOnUndoClick","handleOnRedoClick","handleOnNewEmployee","handleOnScheduleBeginChange","handleOnScheduleEndChange","element","document","createElement","file","Blob","JSON","stringify","type","href","URL","createObjectURL","download","asString","Date","body","appendChild","click","refs","fileUploader","e","reader","FileReader","onload","json","parse","result","setState","readAsText","target","files","settings_temp","key","employee","value","getAttribute","find","parseInt","toUpperCase","preference","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport EmployeesTableManager from './EmployeesTableManager';\nimport SettingsManager from './SettingsManager';\nimport * as Helpers from'./Helpers.js';\nimport './App.scss';\n\nconst format = require('date-format');\n\n// + ZROBIONE\n// ~ PRAWIE ZROBIONE\n// ! NASTĘPNE W PLANIE\n\n// [+] TODO 2 : Zapis i odczyt stanu menadżera tabeli do/z pliku\n// [+] TODO 3 : Zapis preferencji po edytowaniu pola, przypisanie polu oznaczenia preferencji\n// [+] TODO 4 : Auto generowanie planu pracy na podstawie preferencji\n// [ ] TODO 5 : Poprzenosic wszystkie kompo-funkcje do osobnych plików\n// [+] TODO 6 : Cieszyc sie że choć jeden projekt posuwa się do przodu :3\n// [~] TODO 7 : Przygotować szablon ustawień\n// [+] TODO 8 : Zablokować możliwość edycji dni wolnych od pracy\n// [ ] TODO 9 : Automatyczne generowanie dat według kwartału ustawionego w ustawieniach\n// [+] TODO 10 : Oznaczenie świąt\n// [ ] TODO 11 : Zwracanie dnia wolnego za sobotę.\n// [!] TODO 12 : Przygotowanie modal'a z wszystkimi ustawieniami\n// [ ] TODO 13 : Ujmowanie czasu pracy pracownikom z preferencjami\n\n\n\nexport default class App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsettings: {\n\t\t\t\tmax_daily_time: 12,\t// Maksymalny dzienny czas pracy\n\t\t\t\tdaily_break: 13, // Minimalna przerwa miedzy kolejnymi zmianami\n\t\t\t\tweaky_break: 35, // minimalna przerwa w tygodniu\n\t\t\t\tfree_indexs: [ // Wpisy które ujmują 8h pracy\n\t\t\t\t\t\"NP\", \"SP\", \"L4\", \"UW\", \"DU\", \"ZZ\", \"UO\"\n\t\t\t\t],\n\t\t\t\tfree_days: {  // Ustawienia dni tygodnia, wolne i jego rodzaj\n\t\t\t\t\tsun: {\n\t\t\t\t\t\tshift: \"N\",\n\t\t\t\t\t\tpermanent: true,\n\t\t\t\t\t},\n\t\t\t\t\tmon: null,\n\t\t\t\t\ttue: null,\n\t\t\t\t\twed: null,\n\t\t\t\t\tthu: null,\n\t\t\t\t\tfri: null,\n\t\t\t\t\tsat: {\n\t\t\t\t\t\tshift: \"S\",\n\t\t\t\t\t\tpermanent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmin_per_shift: { // Minimalna załoga pracownicza na zmianie danego dnia\n\t\t\t\t\tsun: {\n\t\t\t\t\t\tshift_1: 0,\n\t\t\t\t\t\tshift_2: 0,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tmon: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 5,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\ttue: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\twed: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tthu: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tfri: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tsat: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tholidays: [ // Święta ustawowo wolne\n\t\t\t\t\t{ \tdate: \"2020-01-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-01-06\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-04-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-04-13\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-03\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-31\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-06-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-08-15\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-11-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-11-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-12-25\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-12-16\", \tshift: \"WS\" \t},\n\t\t\t\t],\n\t\t\t\tis_absences_layer: false,\n\t\t\t\tis_time_layer: false,\n\t\t\t},\n\t\t\temployee_next_id: 14,\n\t\t\temployees: [\n\t\t\t\t// {\tid: 0,\tsignature: \"Adam Nowak\",\ttime_contract: 1,\troles: []\t},\n\t\t\t\t{\tid: 1,\tsignature: \"Adam Nowak\",\ttime_contract: 1,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 2,\tsignature: \"Hubert Lipa\",\ttime_contract: 1,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 3,\tsignature: \"Karolina Pama\",\ttime_contract: 1,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 4,\tsignature: \"Dawid Zsiadło\",\ttime_contract: 1,\troles: [ \"STARSZY KASJER\" ]\t},\n\t\t\t\t{\tid: 5,\tsignature: \"Andrzej Jawor\",\ttime_contract: 1,\troles: [ \"KIEROWNIK\" ]\t},\n\t\t\t\t{\tid: 6,\tsignature: \"Tomasz Budyń\",\ttime_contract: 1,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 7,\tsignature: \"Joanna Kwas\",\ttime_contract: .75,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 8,\tsignature: \"Adam Małysz\",\ttime_contract: .75,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 9,\tsignature: \"Kawaii Omate\",\ttime_contract: 1,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 10,\tsignature: \"Siergiej Oli\",\ttime_contract: 1,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 11,\tsignature: \"Jan Polak\",\t\ttime_contract: 1,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 12,\tsignature: \"Hans Niemiec\",\ttime_contract: 1,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 13,\tsignature: \"John States\",\ttime_contract: .5,\troles: [ \"KASJER\" ]\t},\n\t\t\t],\n\t\t\tdates: [\n\t\t\t\t\"2020-04-01\", \"2020-04-02\", \"2020-04-03\", \"2020-04-04\", \"2020-04-05\", \"2020-04-06\", \"2020-04-07\",\n\t\t\t\t\"2020-04-08\", \"2020-04-09\", \"2020-04-10\", \"2020-04-11\", \"2020-04-12\", \"2020-04-13\", \"2020-04-14\",\n\t\t\t\t\"2020-04-15\", \"2020-04-16\", \"2020-04-17\", \"2020-04-18\", \"2020-04-19\", \"2020-04-20\", \"2020-04-21\",\n\t\t\t\t\"2020-04-22\", \"2020-04-23\", \"2020-04-24\", \"2020-04-25\", \"2020-04-26\", \"2020-04-27\", \"2020-04-28\",\n\t\t\t\t\"2020-04-29\", \"2020-04-30\", \"2020-05-01\", \"2020-05-02\", \"2020-05-03\", \"2020-05-04\", \"2020-05-05\",\n\t\t\t \t\"2020-05-06\", \"2020-05-07\", \"2020-05-08\", \"2020-05-09\", \"2020-05-10\", \"2020-05-11\", \"2020-05-12\",\n\t\t\t \t\"2020-05-13\", \"2020-05-14\", \"2020-05-15\", \"2020-05-16\", \"2020-05-17\", \"2020-05-18\", \"2020-05-19\",\n\t\t\t \t\"2020-05-20\", \"2020-05-21\", \"2020-05-22\", \"2020-05-23\", \"2020-05-24\", \"2020-05-25\", \"2020-05-26\",\n\t\t\t\t\"2020-05-27\", \"2020-05-28\", \"2020-05-29\", \"2020-05-30\", \"2020-05-31\", \"2020-06-01\", \"2020-06-02\",\n\t\t\t\t\"2020-06-03\", \"2020-06-04\", \"2020-06-05\", \"2020-06-06\", \"2020-06-07\", \"2020-06-08\", \"2020-06-09\",\n\t\t\t\t\"2020-06-10\", \"2020-06-11\", \"2020-06-12\", \"2020-06-13\", \"2020-06-14\", \"2020-06-15\", \"2020-06-16\",\n\t\t\t\t\"2020-06-17\", \"2020-06-18\", \"2020-06-19\", \"2020-06-21\", \"2020-06-22\", \"2020-06-23\", \"2020-06-24\",\n\t\t\t\t\"2020-06-25\", \"2020-06-26\", \"2020-06-27\", \"2020-06-28\", \"2020-06-29\", \"2020-06-30\",\n\t\t\t],\n\t\t\t// preferences: [],\n\t\t\tschedules: [\n\t\t\t\t// { \temployee_id: 0, \tdate: \"03-04-2020\", \tbegin: \"06:00:00\",\t\tend: \"14:00:00\",\tpreference: false \t},\n\t\t\t],\n\t\t\tabsences: [\n\t\t\t\t// {\temployee_id: 0,\t\tdate: \"03-04-2020\",\t\tindex: \"L4\"  }\n\t\t\t]\n\t\t}\n\n\t\tthis.handleOnSaveClick = this.handleOnSaveClick.bind(this);\n\t\tthis.handleOnUploadClick = this.handleOnUploadClick.bind(this);\n\t\tthis.handleOnUploadChange = this.handleOnUploadChange.bind(this);\n\n\t\tthis.handleOnGenerateClick = this.handleOnGenerateClick.bind(this);\n\t\tthis.handleOnClearClick = this.handleOnClearClick.bind(this);\n\n\t\tthis.handleOnShowAbsencesClick = this.handleOnShowAbsencesClick.bind(this);\n\t\tthis.handleOnShowTimeClick = this.handleOnShowTimeClick.bind(this);\n\n\t\tthis.handleOnUndoClick = this.handleOnUndoClick.bind(this);\n\t\tthis.handleOnRedoClick = this.handleOnRedoClick.bind(this);\n\n\t\tthis.handleOnNewEmployee = this.handleOnNewEmployee.bind(this);\n\n\t\tthis.handleOnScheduleBeginChange = this.handleOnScheduleBeginChange.bind(this);\n\t\tthis.handleOnScheduleEndChange = this.handleOnScheduleEndChange.bind(this);\n\t\t// this.pushSchedule = this.pushSchedule.bind(this);\n\t}\n\n\t// Tu trzeba będzie zrobić tak żeby sprawdzało tylko dla jednego pracownika bo to szkoda zachodu na niezainteresowanych\n\tvalidateAllSchedules = (employee_id) => {\n\n\t\t// Poprawność leksykalna wpisu\n\t\tconst schedules_temp = [ ...this.state.schedules ].filter(schedule => { return ( schedule.employee_id === employee_id ) } );\n\t\tfor ( const schedule of schedules_temp ) {\n\t\t\tschedule.validation.is_valid = true;\n\n\t\t\tlet scheduleBegin = schedule.begin;\n\t\t\tlet scheduleEnd = schedule.end;\n\n\t\t\tif ( ! ( Helpers.timeValidator( scheduleBegin ) || Helpers.shiftValidator( scheduleBegin ) ) ) {\n\t\t\t\tschedule.validation.is_valid = false;\n\t\t\t\tschedule.validation.reason = \"Nieprawidłowy format czasu.\"\n\t\t\t}\n\n\t\t\tif ( Helpers.timeValidator( scheduleBegin ) && ! Helpers.timeValidator( scheduleEnd ) ) {\n\t\t\t\tschedule.validation.is_valid = false;\n\t\t\t\tschedule.validation.reason = \"Nieprawidłowy format czasu.\"\n\t\t\t}\n\t\t}\n\n\t\t// Poprawność czasu pracy\n\t\tlet preventDate = null;\n\t\tlet currentDate = null;\n\t\tlet preventSchedule = null;\n\t\tlet currentSchedule = null;\n\t\tconst weeks = chunk( [ ...this.state.dates ], 7 );\n\t\tfor ( const week of weeks ) {\n\n\t\t\tlet isWeaklyBreak = false;\n\t\t\tfor ( const date of week ) {\n\t\t\t\tlet isDailyBreak = false; // Przerwa między dniami pracy\n\t\t\t\tlet isDailyTime = false; // Maksymalny czas pracy na zmianie\n\n\t\t\t\tif ( currentDate != null ) {\n\t\t\t\t\tpreventDate = currentDate;\n\t\t\t\t}\n\n\t\t\t\tcurrentDate = date;\n\t\t\t\tconst schedule = schedule_temp.filter(schedule => { return ( schedule.date == currentDate ) } );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// const employees = [ ...this.state.employees ].filter(employee => { return ( employee.id == employee_id ) });\n\t\t//\n\t\t// const weeks = chunk( [ ...this.state.dates ], 7 );\n\t\t// for ( const employee of employees ) {\n\t\t// \tlet preventDate = null;\n\t\t// \tlet currentDate = null;\n\t\t// \tlet preventSchedule = null;\n\t\t// \tlet currentSchedule = null;\n\t\t// \tfor ( const week of weeks ) {\n\t\t//\n\t\t// \t\tlet isWeaklyBreak = false;\n\t\t// \t\tfor ( const date of week ) {\n\t\t//\n\t\t// \t\t\tlet isDailyBreak = false;\n\t\t// \t\t\tif ( currentDate === null ) {\n\t\t// \t\t\t\tcurrentDate = date;\n\t\t// \t\t\t\tcontinue;\n\t\t// \t\t\t} else {\n\t\t// \t\t\t\tpreventDate = currentDate;\n\t\t// \t\t\t\tcurrentDate = date;\n\t\t//\n\t\t// \t\t\t\tconsole.log(preventDate, currentDate);\n\t\t// \t\t\t\t// if ( currentSchedule === null ) {\n\t\t// \t\t\t\t// \tcurrentSchedule = this.state.schedules.find(schedule => { return ( schedule.employee_id === employee_id && schedule.date === currentDate ) });\n\t\t// \t\t\t\t// \tcontinue;\n\t\t// \t\t\t\t// } else {\n\t\t// \t\t\t\t// \tpreventSchedule = currentSchedule;\n\t\t// \t\t\t\t// \tcurrentSchedule = this.state.schedules.find(schedule => { return ( schedule.employee_id === employee_id && schedule.date === currentDate ) });\n\t\t// \t\t\t\t//\n\t\t// \t\t\t\t// \tif ( currentSchedule != null ) {\n\t\t// \t\t\t\t//\n\t\t// \t\t\t\t//\n\t\t// \t\t\t\t// }\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t\treturn;\n\t\t// \t}\n\t\t// }\n\n\t\t// this.setState({ schedules: schedules_temp });\n\t}\n\n\thandleOnSaveClick() {\n\t\tconst element = document.createElement(\"a\");\n\t\tconst file = new Blob([JSON.stringify(this.state)], {type: 'application/json'});\n\t\telement.href = URL.createObjectURL(file);\n\t\telement.download = format.asString('dd-MM-yyyy hh:mm', new Date());\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t}\n\n\n\thandleOnUploadClick() {\n\t\tthis.refs.fileUploader.click();\n\t}\n\n\thandleOnUploadChange(e) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = ((reader) => {\n\t\t\treturn () => {\n\t\t\t\tconst json = JSON.parse(reader.result);\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsettings: json.settings,\n\t\t\t\t\temployees: json.employees,\n\t\t\t\t\temployee_next_id: json.employee_next_id,\n\t\t\t\t\tschedules: json.schedules,\n\t\t\t\t\tabsences: json.absences,\n\t\t\t\t} );\n\t\t\t}\n\t\t})(reader);\n\n\t\treader.readAsText(e.target.files[0]);\n\t}\n\n\thandleOnGenerateClick() { }\n\n\thandleOnClearClick() {\n\t\tthis.setState( { schedules: [ ]} )\n\t}\n\n\thandleOnShowAbsencesClick() {\n\t\tlet settings_temp = { ...this.state.settings }\n\t\tsettings_temp.is_absences_layer = !settings_temp.is_absences_layer;\n\t\tsettings_temp.is_time_layer = false;\n\t\tthis.setState( { settings: { ...settings_temp } } );\n\t}\n\n\thandleOnShowTimeClick() {\n\t\tlet settings_temp = { ...this.state.settings }\n\t\tsettings_temp.is_time_layer = !settings_temp.is_time_layer;\n\t\tsettings_temp.is_absences_layer = false;\n\t\tthis.setState( { settings: { ...settings_temp } } );\n\t}\n\n\thandleOnUndoClick() { }\n\n\thandleOnRedoClick() { }\n\n\thandleOnNewEmployee(e) {\n\t\tif (e.key === \"Enter\") {\n\t\t\tconst employee = {\n\t\t\t\tid: this.state.employee_next_id,\n\t\t\t\tsignature: e.target.value,\n\t\t\t\ttime_contract: 1,\n\t\t\t\troles: []\n\t\t\t}\n\n\t\t\tthis.setState( { employees: [ ...this.state.employees, employee], employee_next_id: this.state.employee_next_id + 1 } );\n\t\t\te.target.value = \"\";\n\t\t}\n\t}\n\n\thandleOnScheduleBeginChange(e) {\n\t\tlet employee_id = e.target.getAttribute('data-employee-id');\n\n\t\tlet schedules_temp = [ ...this.state.schedules ]\n\t\tschedules_temp = schedules_temp.filter(schedule => { return !(\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tlet schedule_temp = [ ...this.state.schedules ].find(schedule => { return (\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tif ( e.target.value != \"\" ) {\n\t\t\tconst schedule = {\n\t\t\t\temployee_id: parseInt( employee_id ),\n\t\t\t\tdate: e.target.getAttribute('data-date-id'),\n\t\t\t\tbegin: e.target.value.toUpperCase(),\n\t\t\t\tend: ( schedule_temp ) ? schedule_temp.end : \"\",\n\t\t\t\tpreference: true,\n\t\t\t\tvalidation: {\n\t\t\t\t\tis_valid: true,\n\t\t\t\t\t// reason: \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState( { schedules: [ ...schedules_temp, schedule ] }, () => this.validateAllSchedules( parseInt( employee_id ) ) );\n\t\t} else {\n\t\t\tthis.setState( { schedules: [ ...schedules_temp ] }, () => this.validateAllSchedules( parseInt( employee_id ) ) );\n\t\t}\n\n\n\n\t}\n\n\thandleOnScheduleEndChange(e) {\n\t\tlet employee_id = e.target.getAttribute('data-employee-id');\n\n\t\tlet schedules_temp = [ ...this.state.schedules ].filter(schedule => { return !(\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tlet schedule = [ ...this.state.schedules ].find(schedule => { return (\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\t\tschedule.end = e.target.value;\n\n\t\tthis.setState( { schedules: [ ...schedules_temp, schedule ] }, () => this.validateAllSchedules( parseInt( employee_id ) ) );\n\t}\n\n\t// pushSchedule( p_schedule ) { }\n\n\t// pushSchedules( p_schedules ) { }\n\n\n\t// <button className=\"btn btn-outline-primary font-weight-bold mr-2\" type=\"button\">Pokaż preferencje</button>\n\t// <button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearPreferencesClick }>Usuń preferencje</button>\n\n\t// ustawienia - zapisz - wczytaj - generuj plan pracy - wyczysc plan pracy - pokaz/ukryj absencje - pokaz/ukryj czas pracy - cofnij - przywroc\n\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<nav className=\"navbar navbar-light bg-light\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<SettingsManager settings={ this.state.settings } />\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnSaveClick }>Zapisz</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnUploadClick }>Wczytaj</button>\n\t\t\t\t    \t<button className=\"btn btn-outline-success font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnGenerateClick }>Generuj plan pracy</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearClick }>Wyczyść plan pracy</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-info font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnShowAbsencesClick }>\n\t\t\t\t\t\t\t{ ( this.state.settings.is_absences_layer === false ) ? \"Pokaż absencje\" : \"Ukryj absencje\" }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-info font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnShowTimeClick }>\n\t\t\t\t\t\t\t{ ( this.state.settings.is_time_layer === false ) ? \"Pokaż czas pracy\" : \"Ukryj czas pracy\" }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\">Cofnij</button>\n\t\t\t\t    \t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\">Przywróć</button>\n\t\t\t\t\t\t<input ref=\"fileUploader\" className=\"d-none\" type=\"file\" onChange={ this.handleOnUploadChange }/>\n\t\t\t\t\t</form>\n\t\t\t\t</nav>\n\t\t\t\t<EmployeesTableManager settings={ this.state.settings } employees={this.state.employees} dates={this.state.dates} schedules={this.state.schedules} onNewEmployee={this.handleOnNewEmployee} onScheduleBeginChange={this.handleOnScheduleBeginChange} onScheduleEndChange={this.handleOnScheduleEndChange}/>\n\t\t\t</>\n\t    );\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}