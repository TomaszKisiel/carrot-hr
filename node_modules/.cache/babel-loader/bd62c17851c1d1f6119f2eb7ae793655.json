{"ast":null,"code":"var _jsxFileName = \"/home/tomek/Social_Media/CarrotStudio/CarrotHR/src/Components/EmployeesTableManager.js\";\nimport React, { Component } from 'react';\n\nconst format = require('date-format');\n\nconst days = [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"];\n\nlet getDayName = date => {\n  let dt = new Date(date);\n  return days[dt.getDay()];\n};\n\nconst days_PL = [\"ND\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\"];\n\nlet getPolishDayName = date => {\n  let dt = new Date(date);\n  return days_PL[dt.getDay()];\n};\n\nfunction TableHeader(props) {\n  let tr = [];\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    key: \"number-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 10\n    }\n  }, \"#\"));\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-right\",\n    key: \"signature-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 10\n    }\n  }, \"Pracownik\"));\n\n  for (const date of props.dates) {\n    // const dt = new Date(date)\n    tr.push( /*#__PURE__*/React.createElement(\"th\", {\n      \"data-date\": date,\n      key: date,\n      className: \"border-right text-center p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 89\n      }\n    }, format.asString('dd.MM', new Date(date))), /*#__PURE__*/React.createElement(\"hr\", {\n      class: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 159\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 176\n      }\n    }, getPolishDayName(date))));\n  }\n\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    key: \"tr-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 14\n    }\n  }, tr);\n}\n\nfunction TableData(props) {\n  let tbody = []; // function compare(a, b) {\n  // \tconst stateA = a.is_super_manager || a.is_manager;\n  // \tconst stateB = b.is_super_manager;\n  //\n  // \tlet comparison = 0;\n  // \tif (stateA > stateB) {\n  // \t\tcomparison = 1;\n  // \t} else if (stateA < stateB) {\n  // \t\tcomparison = -1;\n  // \t}\n  // \treturn (comparison * -1)\n  // }\n  //\n  // props.employees.sort(compare)\n\n  for (const [i, employee] of props.employees.entries()) {\n    const tr = [];\n    tr.push( /*#__PURE__*/React.createElement(\"th\", {\n      className: \"align-middle\",\n      key: \"number-\" + employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, i + 1));\n    tr.push( /*#__PURE__*/React.createElement(\"th\", {\n      className: \"border-right align-middle\",\n      key: \"signature-\" + employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }, employee.signature));\n\n    for (const date of props.dates) {\n      const schedule = props.schedules.find(schedule => {\n        return schedule.employee_id == employee.id && schedule.date == date;\n      });\n      let begin = schedule ? schedule.begin : \"\";\n      let end = schedule ? schedule.end : \"\";\n\n      if (props.settings.is_absences_layer === true) {} else if (props.settings.is_time_layer === true) {\n        let beginDate = Date.parse(\"01-01-1970T\" + begin + \":00Z\");\n        let endDate = Date.parse(\"01-01-1970T\" + begin + \":00Z\");\n        let tdClassName = \"border-right py-1 align-middle\";\n        if (getDayName(date) == \"sun\") tdClassName += \" carrotHR__field--sunday\";\n        if (false) tdClassName += \" carrotHR__field--warning\"; // Pracuje za długo\n\n        let inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\n        console.log(beginDate);\n        console.log(endDate);\n        let time = 8;\n        tr.push( /*#__PURE__*/React.createElement(\"td\", {\n          id: employee.id + \":\" + date,\n          key: employee.id + \":\" + date,\n          className: tdClassName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          value: time,\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 7\n          }\n        })));\n      } else {\n        let isBeginProperlyFormated = true;\n        let timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\n\n        if (begin && ![\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin)) {\n          if (!timeValidator.test(begin)) {\n            isBeginProperlyFormated = false;\n          }\n        }\n\n        let tdClassName = \"border-right py-1 align-middle\";\n        if (getDayName(date) == \"sun\") tdClassName += \" carrotHR__field--sunday\";\n        if (schedule && schedule.preference) tdClassName += \" carrotHR__field--preference\";\n        if (props.settings.holidays.find(holiday => {\n          return holiday.date == date;\n        })) tdClassName += \" carrotHR__field--holiday\";\n        if (isBeginProperlyFormated === false) tdClassName += \" carrotHR__field--warning\";\n        let inputClassName = \"carrotHR__input carrotHR__input--shift form-control\"; // <input data-date-id={date} data-employee-id={employee.id} className={ endInputClassName } onChange={ (e) => props.onScheduleChange(e, \"end\") } value={ end } />\n\n        tr.push( /*#__PURE__*/React.createElement(\"td\", {\n          id: employee.id + \":\" + date,\n          key: employee.id + \":\" + date,\n          className: tdClassName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          onChange: props.onScheduleBeginChange,\n          value: begin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 7\n          }\n        }), begin && isBeginProperlyFormated && ![\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin) ? /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          onChange: props.onScheduleEndChange,\n          value: end,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 8\n          }\n        }) : \"\"));\n      }\n    }\n\n    let trClassName = \"\"; // if ( employee.is_super_manager == true ) trClassName += \" carrotHR__row--super-manager\"\n    // if ( employee.is_manager == true ) trClassName += \" carrotHR__row--manager\"\n\n    tbody.push( /*#__PURE__*/React.createElement(\"tr\", {\n      class: trClassName,\n      key: employee.id,\n      draggable: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 14\n      }\n    }, tr));\n  }\n\n  return tbody;\n}\n\nfunction TableNewRow(props) {\n  const tr = [];\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    key: \"order-new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 10\n    }\n  }, \"#\"));\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    key: \"signature-new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    key: \"signature-input-new\",\n    onKeyDown: props.onNewEmployee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 34\n    }\n  })));\n\n  for (const date of props.dates) {\n    tr.push( /*#__PURE__*/React.createElement(\"td\", {\n      key: date,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    key: \"signature-tr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, tr);\n}\n\nexport default class EmployeesTableManager extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"table\", {\n      className: \"carrotHR__table table table-hover table-striped mb-0 text-nowrap border-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(TableHeader, {\n      dates: this.props.dates,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(TableData, {\n      settings: this.props.settings,\n      employees: this.props.employees,\n      dates: this.props.dates,\n      schedules: this.props.schedules,\n      onScheduleBeginChange: this.props.onScheduleBeginChange,\n      onScheduleEndChange: this.props.onScheduleEndChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(TableNewRow, {\n      dates: this.props.dates,\n      onNewEmployee: this.props.onNewEmployee,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/home/tomek/Social_Media/CarrotStudio/CarrotHR/src/Components/EmployeesTableManager.js"],"names":["React","Component","format","require","days","getDayName","date","dt","Date","getDay","days_PL","getPolishDayName","TableHeader","props","tr","push","dates","asString","TableData","tbody","i","employee","employees","entries","id","signature","schedule","schedules","find","employee_id","begin","end","settings","is_absences_layer","is_time_layer","beginDate","parse","endDate","tdClassName","inputClassName","console","log","time","isBeginProperlyFormated","timeValidator","includes","test","preference","holidays","holiday","onScheduleBeginChange","onScheduleEndChange","trClassName","TableNewRow","onNewEmployee","EmployeesTableManager","constructor","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nconst format = require('date-format');\r\n\r\nconst days = [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"];\r\nlet getDayName = (date) => {\r\n\tlet dt = new Date(date);\r\n\treturn days[dt.getDay()];\r\n}\r\n\r\nconst days_PL = [\"ND\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\"];\r\nlet getPolishDayName = (date) => {\r\n\tlet dt = new Date(date);\r\n\treturn days_PL[dt.getDay()];\r\n}\r\n\r\nfunction TableHeader(props) {\r\n\tlet tr = []\r\n\r\n\ttr.push(<th key=\"number-header\" >#</th>)\r\n\ttr.push(<th className=\"border-right\" key=\"signature-header\">Pracownik</th>)\r\n\r\n    for ( const date of props.dates ) {\r\n\t\t// const dt = new Date(date)\r\n      \ttr.push(<th data-date={date} key={date} className=\"border-right text-center p-0\"><span class=\"px-3\">{ format.asString('dd.MM', new Date(date)) }</span><hr class=\"m-0\"/><span class=\"px-3\">{ getPolishDayName(date) }</span></th>)\r\n    }\r\n    return ( <tr key=\"tr-header\">{ tr }</tr> )\r\n}\r\n\r\nfunction TableData(props) {\r\n\tlet tbody = []\r\n\r\n\t// function compare(a, b) {\r\n\t// \tconst stateA = a.is_super_manager || a.is_manager;\r\n\t// \tconst stateB = b.is_super_manager;\r\n\t//\r\n\t// \tlet comparison = 0;\r\n\t// \tif (stateA > stateB) {\r\n\t// \t\tcomparison = 1;\r\n\t// \t} else if (stateA < stateB) {\r\n\t// \t\tcomparison = -1;\r\n\t// \t}\r\n\t// \treturn (comparison * -1)\r\n\t// }\r\n\t//\r\n\t// props.employees.sort(compare)\r\n\r\n\tfor ( const [i, employee] of props.employees.entries() ) {\r\n\t\tconst tr = []\r\n\r\n\t\ttr.push(<th className=\"align-middle\" key={ \"number-\" + employee.id }>{ i + 1 }</th>)\r\n\t\ttr.push(<th className=\"border-right align-middle\" key={ \"signature-\" + employee.id }>{ employee.signature }</th>)\r\n\r\n\t\tfor ( const date of props.dates ) {\r\n\t\t\tconst schedule = props.schedules.find(schedule => { return (\r\n\t\t\t\tschedule.employee_id == employee.id &&\r\n\t\t\t\tschedule.date == date\r\n\t\t\t)});\r\n\r\n\t\t\tlet begin = ( schedule ) ? schedule.begin : \"\";\r\n\t\t\tlet end = ( schedule ) ? schedule.end : \"\";\r\n\r\n\t\t\tif ( props.settings.is_absences_layer === true ) {\r\n\r\n\t\t\t} else if ( props.settings.is_time_layer === true ) {\r\n\t\t\t\tlet beginDate = Date.parse(\"01-01-1970T\"+ begin +\":00Z\");\r\n\t\t\t\tlet endDate = Date.parse(\"01-01-1970T\"+ begin +\":00Z\");\r\n\r\n\t\t\t\tlet tdClassName = \"border-right py-1 align-middle\";\r\n\t\t\t\tif ( getDayName(date) == \"sun\" ) tdClassName += \" carrotHR__field--sunday\";\r\n\t\t\t\tif ( false ) tdClassName += \" carrotHR__field--warning\"; // Pracuje za długo\r\n\r\n\t\t\t\tlet inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\r\n\r\n\t\t\t\tconsole.log(beginDate);\r\n\t\t\t\tconsole.log(endDate);\r\n\r\n\t\t\t\tlet time = 8;\r\n\r\n\t\t\t\ttr.push(\r\n\t\t\t\t\t<td id={employee.id + \":\" + date} key={ employee.id + \":\" + date} className={ tdClassName }>\r\n\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } value={ time } disabled/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlet isBeginProperlyFormated = true;\r\n\t\t\t\tlet timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\r\n\r\n\t\t\t\tif ( begin && ! [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) ) {\r\n\t\t\t\t\tif ( ! timeValidator.test( begin ) ) {\r\n\t\t\t\t\t\tisBeginProperlyFormated = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet tdClassName = \"border-right py-1 align-middle\";\r\n\t\t\t\tif ( getDayName(date) == \"sun\" ) tdClassName += \" carrotHR__field--sunday\";\r\n\t\t\t\tif ( schedule && schedule.preference ) tdClassName += \" carrotHR__field--preference\";\r\n\t\t\t\tif ( props.settings.holidays.find( holiday => { return ( holiday.date == date ) }) ) tdClassName += \" carrotHR__field--holiday\";\r\n\t\t\t\tif ( isBeginProperlyFormated === false ) tdClassName += \" carrotHR__field--warning\"\r\n\r\n\t\t\t\tlet inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\r\n\r\n\t\t\t\t// <input data-date-id={date} data-employee-id={employee.id} className={ endInputClassName } onChange={ (e) => props.onScheduleChange(e, \"end\") } value={ end } />\r\n\t\t\t\ttr.push(\r\n\t\t\t\t\t<td id={employee.id + \":\" + date} key={ employee.id + \":\" + date} className={ tdClassName }>\r\n\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } onChange={ props.onScheduleBeginChange } value={ begin } />\r\n\t\t\t\t\t\t{ ( begin && isBeginProperlyFormated && ! [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) ) ?\r\n\t\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } onChange={ props.onScheduleEndChange } value={ end } /> : \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet trClassName = \"\";\r\n\t\t// if ( employee.is_super_manager == true ) trClassName += \" carrotHR__row--super-manager\"\r\n\t\t// if ( employee.is_manager == true ) trClassName += \" carrotHR__row--manager\"\r\n\r\n\t\ttbody.push(<tr class={ trClassName } key={ employee.id } draggable>{ tr }</tr>)\r\n\t}\r\n\r\n\treturn tbody;\r\n}\r\n\r\nfunction TableNewRow(props) {\r\n\tconst tr = [];\r\n\ttr.push(<th key=\"order-new\">#</th>)\r\n\ttr.push(<th key=\"signature-new\"><input key=\"signature-input-new\" onKeyDown={ props.onNewEmployee } /></th>)\r\n\r\n\tfor ( const date of props.dates ) {\r\n\t\ttr.push(<td key={date}></td>)\r\n\t}\r\n\r\n\treturn ( <tr key=\"signature-tr\">{ tr }</tr> );\r\n}\r\n\r\nexport default class EmployeesTableManager extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<table className=\"carrotHR__table table table-hover table-striped mb-0 text-nowrap border-top\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<TableHeader dates={ this.props.dates }/>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<TableData settings={ this.props.settings } employees={ this.props.employees } dates={ this.props.dates } schedules={ this.props.schedules } onScheduleBeginChange={this.props.onScheduleBeginChange} onScheduleEndChange={this.props.onScheduleEndChange}/>\r\n\t\t\t\t\t<TableNewRow dates={ this.props.dates } onNewEmployee={ this.props.onNewEmployee }/>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}