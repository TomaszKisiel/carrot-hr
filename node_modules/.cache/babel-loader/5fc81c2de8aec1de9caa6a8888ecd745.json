{"ast":null,"code":"var _jsxFileName = \"/home/tomek/projects/carrot-hr/src/Components/App.js\";\nimport React, { Component } from 'react';\nimport EmployeesTableManager from './EmployeesTableManager';\nimport SettingsManager from './SettingsManager';\nimport * as Helpers from './Helpers.js';\nimport './App.scss';\n\nconst format = require('date-format');\n\nconst moment = require('moment');\n\nconst momentDurationFormatSetup = require(\"moment-duration-format\"); // + ZROBIONE\n// ~ PRAWIE ZROBIONE\n// ! NASTĘPNE W PLANIE\n// [+] TODO 2 : Zapis i odczyt stanu menadżera tabeli do/z pliku\n// [+] TODO 3 : Zapis preferencji po edytowaniu pola, przypisanie polu oznaczenia preferencji\n// [+] TODO 4 : Auto generowanie planu pracy na podstawie preferencji\n// [ ] TODO 5 : Poprzenosic wszystkie kompo-funkcje do osobnych plików\n// [+] TODO 6 : Cieszyc sie że choć jeden projekt posuwa się do przodu :3\n// [~] TODO 7 : Przygotować szablon ustawień\n// [+] TODO 8 : Zablokować możliwość edycji dni wolnych od pracy\n// [ ] TODO 9 : Automatyczne generowanie dat według kwartału ustawionego w ustawieniach\n// [+] TODO 10 : Oznaczenie świąt\n// [ ] TODO 11 : Zwracanie dnia wolnego za sobotę.\n// [!] TODO 12 : Przygotowanie modal'a z wszystkimi ustawieniami\n// [ ] TODO 13 : Ujmowanie czasu pracy pracownikom z preferencjami\n\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validateAllSchedules = () => {\n      for (const employee of this.state.employees) {\n        this.validateEmployeeSchedules(employee.id);\n      }\n    };\n\n    this.validateEmployeeSchedules = employee_id => {\n      // Poprawność leksykalna wpisu\n      const schedules_temp = [...this.state.schedules].filter(schedule => {\n        return schedule.employee_id === employee_id;\n      });\n\n      for (const schedule of schedules_temp) {\n        schedule.validation.is_valid = true;\n        let scheduleBegin = schedule.begin;\n        let scheduleEnd = schedule.end;\n\n        if (!(Helpers.timeValidator(scheduleBegin) || Helpers.shiftValidator(scheduleBegin))) {\n          schedule.validation.is_valid = false;\n          schedule.validation.reason = \"Nieprawidłowy format czasu.\";\n        }\n\n        if (Helpers.timeValidator(scheduleBegin) && !Helpers.timeValidator(scheduleEnd)) {\n          schedule.validation.is_valid = false;\n          schedule.validation.reason = \"Nieprawidłowy format czasu.\";\n        }\n      } // Poprawność czasu pracy\n\n\n      let preventSchedule = null;\n      let currentSchedule = null;\n      const weeks = Helpers.wodge([...this.state.dates], 7, 1);\n\n      for (const week of weeks) {\n        let isWeeklyBreak = false;\n        let schedulesGap = 0; // To jest potrzebne bo jak jest w tygodniu tylko jedna zmiana nie wyłapie że pozostałe 6 dni zaspokaja przerwe 35h\n\n        for (const date of week) {\n          let isDailyBreak = false; // Przerwa między dniami pracy\n\n          if (currentSchedule) {\n            preventSchedule = currentSchedule;\n          }\n\n          currentSchedule = schedules_temp.find(schedule => {\n            return schedule.date == date && Helpers.timeValidator(schedule.begin) && Helpers.timeValidator(schedule.end);\n          }) || null;\n\n          if (currentSchedule == null) {\n            schedulesGap += 1;\n\n            if (schedulesGap >= 2) {\n              isWeeklyBreak = true;\n              schedulesGap = 0;\n            }\n          } else {\n            schedulesGap = 0;\n          } // Walidacja czasu pracy na jednej zmianie\n\n\n          if (currentSchedule) {\n            let currentScheduleBegin = moment(date + \" \" + currentSchedule.begin);\n            let currentScheduleEnd = moment(date + \" \" + currentSchedule.end);\n\n            if (currentScheduleEnd.diff(currentScheduleBegin) <= 0) {\n              currentScheduleEnd.add(1, 'days');\n            }\n\n            let diff = moment.duration(currentScheduleEnd.diff(currentScheduleBegin)).asHours();\n\n            if (diff - this.state.settings.max_daily_time > 0) {\n              currentSchedule.validation.is_valid = false;\n              currentSchedule.validation.reason = \"Przekroczono limit czasu pracy.\";\n            }\n          } // Walidacja między kolejnymi dniami\n\n\n          if (preventSchedule && currentSchedule != preventSchedule) {\n            // Wiem że to poroniona akcaj ( currentSchedule != preventSchedule ) ale z racji że w tygodniu musze sprawdzic też 8 dzień to inaczej sie nieda :(\n            let preventScheduleEnd = moment(preventSchedule.date + \" \" + preventSchedule.end);\n            let currentScheduleBegin = moment(date + \" \" + \"24:00\");\n            ;\n\n            if (currentSchedule) {\n              currentScheduleBegin = moment(currentSchedule.date + \" \" + currentSchedule.begin);\n            }\n\n            let diff = moment.duration(currentScheduleBegin.diff(preventScheduleEnd)).asHours();\n\n            if (diff - this.state.settings.weaky_break >= 0) {\n              isWeeklyBreak = true;\n              isDailyBreak = true;\n            } else if (diff - this.state.settings.daily_break >= 0) {\n              isDailyBreak = true;\n            }\n\n            if (!isDailyBreak) {\n              currentSchedule.validation.is_valid = false;\n              currentSchedule.validation.reason = \"Brak przerwy 13h.\";\n            }\n          }\n        }\n\n        if (!isWeeklyBreak) {\n          for (const date of week) {\n            let schedule = schedules_temp.find(schedule => {\n              return schedule.date == date;\n            }) || null;\n\n            if (schedule) {\n              schedule.validation.is_valid = false;\n              schedule.validation.reason = \"Brak przerwy 35h.\";\n            }\n          }\n        }\n      }\n\n      this.forceUpdate();\n    };\n\n    this.handleOnGenerateClick = () => {\n      this.state.schedules = this.state.schedules.filter(schedule => {\n        return schedule.preference === true;\n      });\n      const schedules = this.state.schedules;\n      const weeks = Helpers.chunk([...this.state.dates], 7);\n      const employees = this.state.employees;\n      const free_days = this.state.settings.free_days;\n\n      for (const index in free_days) {\n        if (free_days[index] !== null) free_days[index].left = 0;\n      }\n\n      for (const employee of employees) {\n        employee.free_days = Helpers.duplicate(free_days);\n        employee.time_left = employee.time_base;\n      }\n\n      for (const week of weeks) {\n        for (const employee of employees) {\n          for (const date of week) {\n            if (employee.free_days[Helpers.getDayName(date)] !== null) employee.free_days[Helpers.getDayName(date)].left += 1;\n          }\n        }\n\n        for (const date of week) {\n          const preferences = schedules.filter(schedule => {\n            return schedule.date === date && schedule.preference === true;\n          });\n          const free_day = this.state.settings.free_days[Helpers.getDayName(date)];\n\n          if (free_day !== null) {\n            if (free_day.permanent === true) {\n              for (const employee of employees) {\n                let schedule = preferences.find(schedule => {\n                  return schedule.employee_id === employee.id && schedule.date === date;\n                }) || null;\n\n                if (schedule === null) {\n                  employee.free_days[Helpers.getDayName(date)].left -= 1;\n                  this.state.schedules.push({\n                    employee_id: employee.id,\n                    date: date,\n                    begin: free_day.shift,\n                    end: null,\n                    preference: false,\n                    validation: {\n                      is_valid: true,\n                      reason: null\n                    }\n                  });\n                }\n              }\n\n              continue;\n            }\n          }\n\n          const holiday = this.state.settings.holidays.find(holiday => {\n            return holiday.date == date;\n          }) || null;\n\n          if (holiday !== null) {\n            for (const employee of employees) {\n              let schedule = preferences.find(schedule => {\n                return schedule.employee_id === employee.id && schedule.date === date;\n              }) || null;\n\n              if (schedule === null) {\n                this.state.schedules.push({\n                  employee_id: employee.id,\n                  date: date,\n                  begin: holiday.shift,\n                  end: null,\n                  preference: false,\n                  validation: {\n                    is_valid: true,\n                    reason: null\n                  }\n                });\n              }\n            }\n\n            continue;\n          }\n\n          let schedules_shift_1 = preferences.filter(schedule => {\n            return schedule.begin === \"1\" || schedule.begin === \"5:45\";\n          }).map(schedule => {\n            schedule.begin = \"6:00\";\n            schedule.end = \"14:00\";\n          }) || [];\n          let schedules_shift_2 = preferences.filter(schedule => {\n            return schedule.begin === \"2\" || schedule.begin === \"13:45\";\n          }).map(schedule => {\n            schedule.begin = \"14:00\";\n            schedule.end = \"22:00\";\n          }) || [];\n          let schedules_shift_3 = preferences.filter(schedule => {\n            return schedule.begin === \"3\" || schedule.begin === \"21:45\";\n          }).map(schedule => {\n            schedule.begin = \"22:00\";\n            schedule.end = \"6:00\";\n          }) || [];\n          let employees_with_preferences_id = preferences.map(schedule => {\n            return schedule.employee_id;\n          });\n          let available_managers = employees.filter(employee => {\n            return !employees_with_preferences_id.includes(employee.id) && (employee.roles.includes(\"KIEROWNIK\") || employee.roles.includes(\"ZASTĘPCA\"));\n          });\n          let available_employees = employees.filter(employee => {\n            return !employees_with_preferences_id.includes(employee.id) && (employee.roles.includes(\"KASJER\") || employee.roles.includes(\"STARSZY KASJER\"));\n          });\n          console.log({\n            available_managers\n          }, {\n            available_employees\n          });\n\n          if (schedules_shift_1.length < this.state.settings.min_per_shift[Helpers.getDayName(date)].shift_1) {\n            const employee = this.getMostBored(available_managers);\n            employee.time_left -= 8.5;\n            let index = available_managers.indexOf(employee);\n            available_managers.splice(index, 1);\n            const schedule = {\n              employee_id: employee.id,\n              date: date,\n              begin: \"5:45\",\n              end: \"14:15\",\n              preference: false,\n              validation: {\n                is_valid: true,\n                reason: null\n              }\n            };\n            schedules_shift_1.push(schedule);\n            this.state.schedules.push(schedule);\n          }\n\n          if (schedules_shift_2.length < this.state.settings.min_per_shift[Helpers.getDayName(date)].shift_2) {\n            const employee = this.getMostBored(available_managers);\n            employee.time_left -= 8.5;\n            let index = available_managers.indexOf(employee);\n            available_managers.splice(index, 1);\n            const schedule = {\n              employee_id: employee.id,\n              date: date,\n              begin: \"13:45\",\n              end: \"22:15\",\n              preference: false,\n              validation: {\n                is_valid: true,\n                reason: null\n              }\n            };\n            schedules_shift_2.push(schedule);\n            this.state.schedules.push(schedule);\n          }\n\n          for (const employee of available_managers) {\n            available_employees.push(employee);\n          } // if ( schedules_shift_3.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_3 ) {\n          // \tconst employee = this.getMostBored( available_managers );\n          // \temployee.time_left -= 8.5;\n          //\n          // \tlet index = available_managers.indexOf( employee );\n          // \tavailable_managers.splice(index, 1);\n          //\n          // \tconst schedule = { employee_id: employee.id, date: date, begin: \"21:45\", end: \"6:15\", preference: false, validation: { is_valid: true, reason: null } };\n          // \tschedules_shift_3.push( schedule );\n          // \tthis.state.schedules.push( schedule );\n          // }\n\n\n          while (schedules_shift_1.length < this.state.settings.min_per_shift[Helpers.getDayName(date)].shift_1) {\n            if (available_employees.length === 0) break;\n            const employee = this.getMostBored(available_employees);\n            employee.time_left -= 8.5;\n            let index = available_employees.indexOf(employee);\n            available_employees.splice(index, 1);\n            const schedule = {\n              employee_id: employee.id,\n              date: date,\n              begin: \"5:45\",\n              end: \"14:15\",\n              preference: false,\n              validation: {\n                is_valid: true,\n                reason: null\n              }\n            };\n            schedules_shift_1.push(schedule);\n            this.state.schedules.push(schedule);\n          }\n\n          while (schedules_shift_2.length < this.state.settings.min_per_shift[Helpers.getDayName(date)].shift_2) {\n            if (available_employees.length === 0) break;\n            const employee = this.getMostBored(available_employees);\n            employee.time_left -= 8.5;\n            let index = available_employees.indexOf(employee);\n            available_employees.splice(index, 1);\n            const schedule = {\n              employee_id: employee.id,\n              date: date,\n              begin: \"13:45\",\n              end: \"22:15\",\n              preference: false,\n              validation: {\n                is_valid: true,\n                reason: null\n              }\n            };\n            schedules_shift_2.push(schedule);\n            this.state.schedules.push(schedule);\n          } // while ( schedules_shift_3.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_3 ) {\n          // \tif ( available_employees.length === 0 ) break;\n          //\n          // \tconst employee = this.getMostBored( available_employees );\n          // \temployee.time_left -= 8.5;\n          //\n          // \tlet index = available_employees.indexOf( employee );\n          // \tavailable_employees.splice(index,1)\n          //\n          // \tconst schedule = { employee_id: employee.id, date: date, begin: \"21:45\", end: \"6:15\", preference: false, validation: { is_valid: true, reason: null } };\n          // \tschedules_shift_3.push( schedule );\n          // \tthis.state.schedules.push( schedule );\n          // }\n\n\n          for (const employee of available_employees) {\n            let shift = \"W\";\n\n            for (const index in employee.free_days) {\n              if (employee.free_days[index] !== null) {\n                if (employee.free_days[index].permanent === true && employee.free_days[index].left > 1 || employee.free_days[index].permanent === false && employee.free_days[index].left > 0) {\n                  shift = employee.free_days[index].shift;\n                  employee.free_days[index].left -= 1;\n                  break;\n                }\n              }\n            }\n\n            this.state.schedules.push({\n              employee_id: employee.id,\n              date: date,\n              begin: shift,\n              end: null,\n              preference: false,\n              validation: {\n                is_valid: true,\n                reason: null\n              }\n            });\n          } // for ( const employee of employees_no_preferences ) {\n          // \tlet shift = \"W\";\n          // \tfor ( const key of [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"] ) {\n          // \t\tif ( !employee.free_days[key] ) continue\n          // \t\tif ( ( this.state.settings.free_days[key].permanent === true && employee.free_days[key].left > 1 ) ||\n          // \t\t\t ( this.state.settings.free_days[key].permanent === false && employee.free_days[key].left > 0 ) ) {\n          // \t\t\tshift = employee.free_days[key].shift;\n          // \t\t\temployee.free_days[key].left -= 1;\n          // \t\t\tbreak;\n          // \t\t}\n          // \t}\n          // \tschedules.push( { employee_id: employee.id, date: date, shift: shift, preference: false } );\n          // }\n          //\n          // for ( const employee of employees_to_free ) {\n          // \tschedules.push( { employee_id: employee.id, date: date, shift: \"W\", preference: false } );\n          // }\n\n          /*\n          \t* Tych z preferencjami trzeba podzielić na 3 kategorie\n          \t* 1 zmiana\n          \t* 2 zmiana\n          \t* 3 zmiana\n          \t* jeżeli maja wpisany czas pracy a nie zmiany\n          \t* to trzeba przeliczyć czy ten czas miesci sie w ramach\n          \t* jakiejs zmiany, jezeli jego czas trwania w min 75%\n          \t* pokrywa sie z dana zmiana to jest on liczony jako ta zmiana\n          \t* moze sie zdazyc tak ze pracownik pokryje dwie zmiany\n          */\n\n          /*\n          \t6:00 - 14:00 Pierwsza zmiana\n          \t14:00 - 22:00 Druga zmiana\n          \t22:00 - 8:00 Trzecia zmiana\n          */\n\n          /*\n          \tPrzykładowy czas pracy:\n          \t8:00 - 20:00 zajmuje min 75% czasu pierwszej zmiany\n          \ti min 75% czasu drugiej zmiany, czyli jest traktowany\n          \tjako pracownik, który zajmuje obie zmiany\n          */\n\n          /*\n          \tKrok 1 uwzglednienie jedynie cyfrowego zapisu zmian\n          \tKrok 2 stworzenie funkcji sprawdzającej w ilu porcentach podany\n          \t\t\tczas pracy pokrywa sie z podanym zakresem godzin\n          */\n          // break;\n\n        } // if(i>5)break;\n\n      } // console.log(employees);\n\n\n      this.validateAllSchedules(); // this.forceUpdate();\n      // this.pushSchedules( schedules );\n    };\n\n    this.getMostBored = employees => {\n      if (employees.length === 0) return;\n      let mostBored = employees[0];\n\n      for (const employee of employees) {\n        if (mostBored.time_left / mostBored.time_base < employee.time_left / employee.time_base) {\n          mostBored = employee;\n        }\n      }\n\n      return mostBored;\n    };\n\n    this.state = {\n      settings: {\n        max_daily_time: 12,\n        // Maksymalny dzienny czas pracy\n        daily_break: 13,\n        // Minimalna przerwa miedzy kolejnymi zmianami\n        weaky_break: 35,\n        // minimalna przerwa w tygodniu\n        free_indexs: [// Wpisy które ujmują 8h pracy\n        \"NP\", \"SP\", \"L4\", \"UW\", \"DU\", \"ZZ\", \"UO\"],\n        free_days: {\n          // Ustawienia dni tygodnia, wolne i jego rodzaj\n          sun: {\n            shift: \"ND\",\n            permanent: true\n          },\n          mon: null,\n          tue: null,\n          wed: null,\n          thu: null,\n          fri: null,\n          sat: {\n            shift: \"SB\",\n            permanent: false\n          }\n        },\n        min_per_shift: {\n          // Minimalna załoga pracownicza na zmianie danego dnia\n          sun: {\n            shift_1: 0,\n            shift_2: 0,\n            shift_3: 0\n          },\n          mon: {\n            shift_1: 5,\n            shift_2: 5,\n            shift_3: 0\n          },\n          tue: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          wed: {\n            shift_1: 5,\n            shift_2: 4,\n            shift_3: 0\n          },\n          thu: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          fri: {\n            shift_1: 4,\n            shift_2: 4,\n            shift_3: 0\n          },\n          sat: {\n            shift_1: 5,\n            shift_2: 4,\n            shift_3: 0\n          }\n        },\n        holidays: [// Święta ustawowo wolne\n        {\n          date: \"2020-01-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-01-06\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-04-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-04-13\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-03\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-05-31\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-06-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-08-15\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-11-01\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-11-11\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-12-25\",\n          shift: \"WS\"\n        }, {\n          date: \"2020-12-16\",\n          shift: \"WS\"\n        }],\n        is_absences_layer: false,\n        is_time_layer: false,\n        is_shifts_layer: false\n      },\n      employee_next_id: 14,\n      employees: [\n      /* {\n      \tid: 0,\n      \tsignature: \"Adam Nowak\",\n      \ttime_contract: 1,\n      \ttime_base: 496,\n      \ttime_left: 496,\n      \troles: []\n      }, */\n      {\n        id: 1,\n        signature: \"Adam Nowak\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KIEROWNIK\"]\n      }, {\n        id: 2,\n        signature: \"Hubert Lipa\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 3,\n        signature: \"Karolina Pama\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 4,\n        signature: \"Dawid Zsiadło\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"ZASTĘPCA\"]\n      }, {\n        id: 5,\n        signature: \"Andrzej Jawor\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"STARSZY KASJER\"]\n      }, {\n        id: 6,\n        signature: \"Tomasz Budyń\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KASJER\"]\n      }, {\n        id: 7,\n        signature: \"Joanna Kwas\",\n        time_contract: .75,\n        time_base: 372,\n        time_left: 372,\n        roles: [\"KASJER\"]\n      }, {\n        id: 8,\n        signature: \"Adam Małysz\",\n        time_contract: .75,\n        time_base: 372,\n        time_left: 372,\n        roles: [\"KASJER\"]\n      }, {\n        id: 9,\n        signature: \"Kawaii Omate\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KASJER\"]\n      }, {\n        id: 10,\n        signature: \"Siergiej Oli\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KASJER\"]\n      }, {\n        id: 11,\n        signature: \"Jan Polak\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KASJER\"]\n      }, {\n        id: 12,\n        signature: \"Hans Niemiec\",\n        time_contract: 1,\n        time_base: 496,\n        time_left: 496,\n        roles: [\"KASJER\"]\n      }, {\n        id: 13,\n        signature: \"John States\",\n        time_contract: .5,\n        time_base: 248,\n        time_left: 248,\n        roles: [\"KASJER\"]\n      }],\n      dates: [\"2020-04-01\", \"2020-04-02\", \"2020-04-03\", \"2020-04-04\", \"2020-04-05\", \"2020-04-06\", \"2020-04-07\", \"2020-04-08\", \"2020-04-09\", \"2020-04-10\", \"2020-04-11\", \"2020-04-12\", \"2020-04-13\", \"2020-04-14\", \"2020-04-15\", \"2020-04-16\", \"2020-04-17\", \"2020-04-18\", \"2020-04-19\", \"2020-04-20\", \"2020-04-21\", \"2020-04-22\", \"2020-04-23\", \"2020-04-24\", \"2020-04-25\", \"2020-04-26\", \"2020-04-27\", \"2020-04-28\", \"2020-04-29\", \"2020-04-30\", \"2020-05-01\", \"2020-05-02\", \"2020-05-03\", \"2020-05-04\", \"2020-05-05\", \"2020-05-06\", \"2020-05-07\", \"2020-05-08\", \"2020-05-09\", \"2020-05-10\", \"2020-05-11\", \"2020-05-12\", \"2020-05-13\", \"2020-05-14\", \"2020-05-15\", \"2020-05-16\", \"2020-05-17\", \"2020-05-18\", \"2020-05-19\", \"2020-05-20\", \"2020-05-21\", \"2020-05-22\", \"2020-05-23\", \"2020-05-24\", \"2020-05-25\", \"2020-05-26\", \"2020-05-27\", \"2020-05-28\", \"2020-05-29\", \"2020-05-30\", \"2020-05-31\", \"2020-06-01\", \"2020-06-02\", \"2020-06-03\", \"2020-06-04\", \"2020-06-05\", \"2020-06-06\", \"2020-06-07\", \"2020-06-08\", \"2020-06-09\", \"2020-06-10\", \"2020-06-11\", \"2020-06-12\", \"2020-06-13\", \"2020-06-14\", \"2020-06-15\", \"2020-06-16\", \"2020-06-17\", \"2020-06-18\", \"2020-06-19\", \"2020-06-20\", \"2020-06-21\", \"2020-06-22\", \"2020-06-23\", \"2020-06-24\", \"2020-06-25\", \"2020-06-26\", \"2020-06-27\", \"2020-06-28\", \"2020-06-29\", \"2020-06-30\"],\n      // preferences: [],\n      schedules: [// { \temployee_id: 0, \tdate: \"03-04-2020\", \tbegin: \"06:00:00\",\t\tend: \"14:00:00\",\tpreference: false \t},\n      ],\n      absences: [// {\temployee_id: 0,\t\tdate: \"03-04-2020\",\t\tindex: \"L4\"  }\n      ]\n    };\n    this.handleOnSaveClick = this.handleOnSaveClick.bind(this);\n    this.handleOnUploadClick = this.handleOnUploadClick.bind(this);\n    this.handleOnUploadChange = this.handleOnUploadChange.bind(this);\n    this.handleOnClearClick = this.handleOnClearClick.bind(this);\n    this.handleOnShowAbsencesClick = this.handleOnShowAbsencesClick.bind(this);\n    this.handleOnShowTimeClick = this.handleOnShowTimeClick.bind(this);\n    this.handleOnUndoClick = this.handleOnUndoClick.bind(this);\n    this.handleOnRedoClick = this.handleOnRedoClick.bind(this);\n    this.handleOnNewEmployee = this.handleOnNewEmployee.bind(this);\n    this.handleOnScheduleBeginChange = this.handleOnScheduleBeginChange.bind(this);\n    this.handleOnScheduleEndChange = this.handleOnScheduleEndChange.bind(this); // this.pushSchedule = this.pushSchedule.bind(this);\n  }\n\n  handleOnSaveClick() {\n    const element = document.createElement(\"a\");\n    const file = new Blob([JSON.stringify(this.state)], {\n      type: 'application/json'\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = format.asString('dd-MM-yyyy hh:mm', new Date());\n    document.body.appendChild(element);\n    element.click();\n  }\n\n  handleOnUploadClick() {\n    this.refs.fileUploader.click();\n  }\n\n  handleOnUploadChange(e) {\n    var reader = new FileReader();\n\n    reader.onload = (reader => {\n      return () => {\n        const json = JSON.parse(reader.result);\n        this.setState({\n          settings: json.settings,\n          employees: json.employees,\n          employee_next_id: json.employee_next_id,\n          schedules: json.schedules,\n          absences: json.absences\n        });\n      };\n    })(reader);\n\n    reader.readAsText(e.target.files[0]);\n  }\n\n  handleOnClearClick() {\n    this.setState({\n      schedules: []\n    });\n  }\n\n  handleOnShowAbsencesClick() {\n    let settings_temp = { ...this.state.settings\n    };\n    settings_temp.is_absences_layer = !settings_temp.is_absences_layer;\n    settings_temp.is_time_layer = false;\n    this.setState({\n      settings: { ...settings_temp\n      }\n    });\n  }\n\n  handleOnShowTimeClick() {\n    let settings_temp = { ...this.state.settings\n    };\n    settings_temp.is_time_layer = !settings_temp.is_time_layer;\n    settings_temp.is_absences_layer = false;\n    settings_temp.is_shifts_layer = false;\n    this.setState({\n      settings: { ...settings_temp\n      }\n    });\n  }\n\n  handleOnShowShiftsClick() {\n    let settings_temp = { ...this.state.settings\n    };\n    settings_temp.is_time_layer = !settings_temp.is_time_layer;\n    settings_temp.is_absences_layer = false;\n    this.setState({\n      settings: { ...settings_temp\n      }\n    });\n  }\n\n  handleOnUndoClick() {}\n\n  handleOnRedoClick() {}\n\n  handleOnNewEmployee(e) {\n    if (e.key === \"Enter\") {\n      const start_time = () => {\n        let time = 0;\n        const weeks = Helpers.chunk([...this.state.dates], 7);\n\n        for (const week of weeks) {\n          for (const date of week) {\n            let free_day = this.state.settings.free_days[Helpers.getDayName(date)];\n            let holiday = this.state.settings.holidays.find(holiday => {\n              return holiday.date == date;\n            });\n            if (!free_day && !holiday) time += 8\n            /* base = 8, time_constract = 1 */\n            ;\n          }\n        }\n      };\n\n      let time_base = start_time();\n      const employee = {\n        id: this.state.employee_next_id,\n        signature: e.target.value,\n        time_contract: 1,\n        time_base: time_base,\n        time_left: time_base,\n        roles: []\n      };\n      this.setState({\n        employees: [...this.state.employees, employee],\n        employee_next_id: this.state.employee_next_id + 1\n      });\n      e.target.value = \"\";\n    }\n  }\n\n  handleOnScheduleBeginChange(e) {\n    let employee_id = e.target.getAttribute('data-employee-id');\n    let schedules_temp = [...this.state.schedules];\n    schedules_temp = schedules_temp.filter(schedule => {\n      return !(schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id'));\n    });\n    let schedule_temp = [...this.state.schedules].find(schedule => {\n      return schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id');\n    });\n\n    if (e.target.value != \"\") {\n      const schedule = {\n        employee_id: parseInt(employee_id),\n        date: e.target.getAttribute('data-date-id'),\n        begin: e.target.value.toUpperCase(),\n        end: schedule_temp ? schedule_temp.end : \"\",\n        preference: true,\n        validation: {\n          is_valid: true // reason: \"\"\n\n        }\n      };\n      this.setState({\n        schedules: [...schedules_temp, schedule]\n      }, () => this.validateEmployeeSchedules(parseInt(employee_id)));\n    } else {\n      this.setState({\n        schedules: [...schedules_temp]\n      }, () => this.validateEmployeeSchedules(parseInt(employee_id)));\n    }\n  }\n\n  handleOnScheduleEndChange(e) {\n    let employee_id = e.target.getAttribute('data-employee-id');\n    let schedules_temp = [...this.state.schedules].filter(schedule => {\n      return !(schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id'));\n    });\n    let schedule = [...this.state.schedules].find(schedule => {\n      return schedule.employee_id == employee_id && schedule.date == e.target.getAttribute('data-date-id');\n    });\n    schedule.end = e.target.value;\n    schedule.preference = true;\n    this.setState({\n      schedules: [...schedules_temp, schedule]\n    }, () => this.validateEmployeeSchedules(parseInt(employee_id)));\n  } // pushSchedule( p_schedule ) { }\n  // pushSchedules( p_schedules ) { }\n  // <button className=\"btn btn-outline-primary font-weight-bold mr-2\" type=\"button\">Pokaż preferencje</button>\n  // <button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearPreferencesClick }>Usuń preferencje</button>\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-light bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(SettingsManager, {\n      settings: this.state.settings,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnSaveClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 7\n      }\n    }, \"Zapisz\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnUploadClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 7\n      }\n    }, \"Wczytaj\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnGenerateClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 10\n      }\n    }, \"Generuj plan pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnClearClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 7\n      }\n    }, \"Wyczy\\u015B\\u0107 plan pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-info font-weight-bold mr-2\",\n      type: \"button\",\n      onClick: this.handleOnShowAbsencesClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 7\n      }\n    }, this.state.settings.is_absences_layer === false ? \"Pokaż absencje\" : \"Ukryj absencje\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-info font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnShowTimeClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 7\n      }\n    }, this.state.settings.is_time_layer === false ? \"Pokaż czas pracy\" : \"Ukryj czas pracy\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-info font-weight-bold mr-4\",\n      type: \"button\",\n      onClick: this.handleOnShowShiftsClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 7\n      }\n    }, this.state.settings.is_shifts_layer === false ? \"Pokaż zmiany\" : \"Ukryj zmiany\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 7\n      }\n    }, \"Cofnij\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-dark font-weight-bold mr-2\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 10\n      }\n    }, \"Przywr\\xF3\\u0107\"), /*#__PURE__*/React.createElement(\"input\", {\n      ref: \"fileUploader\",\n      className: \"d-none\",\n      type: \"file\",\n      onChange: this.handleOnUploadChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(EmployeesTableManager, {\n      settings: this.state.settings,\n      employees: this.state.employees,\n      dates: this.state.dates,\n      schedules: this.state.schedules,\n      onNewEmployee: this.handleOnNewEmployee,\n      onScheduleBeginChange: this.handleOnScheduleBeginChange,\n      onScheduleEndChange: this.handleOnScheduleEndChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/tomek/projects/carrot-hr/src/Components/App.js"],"names":["React","Component","EmployeesTableManager","SettingsManager","Helpers","format","require","moment","momentDurationFormatSetup","App","constructor","props","validateAllSchedules","employee","state","employees","validateEmployeeSchedules","id","employee_id","schedules_temp","schedules","filter","schedule","validation","is_valid","scheduleBegin","begin","scheduleEnd","end","timeValidator","shiftValidator","reason","preventSchedule","currentSchedule","weeks","wodge","dates","week","isWeeklyBreak","schedulesGap","date","isDailyBreak","find","currentScheduleBegin","currentScheduleEnd","diff","add","duration","asHours","settings","max_daily_time","preventScheduleEnd","weaky_break","daily_break","forceUpdate","handleOnGenerateClick","preference","chunk","free_days","index","left","duplicate","time_left","time_base","getDayName","preferences","free_day","permanent","push","shift","holiday","holidays","schedules_shift_1","map","schedules_shift_2","schedules_shift_3","employees_with_preferences_id","available_managers","includes","roles","available_employees","console","log","length","min_per_shift","shift_1","getMostBored","indexOf","splice","shift_2","mostBored","free_indexs","sun","mon","tue","wed","thu","fri","sat","shift_3","is_absences_layer","is_time_layer","is_shifts_layer","employee_next_id","signature","time_contract","absences","handleOnSaveClick","bind","handleOnUploadClick","handleOnUploadChange","handleOnClearClick","handleOnShowAbsencesClick","handleOnShowTimeClick","handleOnUndoClick","handleOnRedoClick","handleOnNewEmployee","handleOnScheduleBeginChange","handleOnScheduleEndChange","element","document","createElement","file","Blob","JSON","stringify","type","href","URL","createObjectURL","download","asString","Date","body","appendChild","click","refs","fileUploader","e","reader","FileReader","onload","json","parse","result","setState","readAsText","target","files","settings_temp","handleOnShowShiftsClick","key","start_time","time","value","getAttribute","schedule_temp","parseInt","toUpperCase","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport EmployeesTableManager from './EmployeesTableManager';\nimport SettingsManager from './SettingsManager';\nimport * as Helpers from'./Helpers.js';\nimport './App.scss';\n\nconst format = require('date-format');\nconst moment = require('moment');\nconst momentDurationFormatSetup = require(\"moment-duration-format\");\n\n// + ZROBIONE\n// ~ PRAWIE ZROBIONE\n// ! NASTĘPNE W PLANIE\n\n// [+] TODO 2 : Zapis i odczyt stanu menadżera tabeli do/z pliku\n// [+] TODO 3 : Zapis preferencji po edytowaniu pola, przypisanie polu oznaczenia preferencji\n// [+] TODO 4 : Auto generowanie planu pracy na podstawie preferencji\n// [ ] TODO 5 : Poprzenosic wszystkie kompo-funkcje do osobnych plików\n// [+] TODO 6 : Cieszyc sie że choć jeden projekt posuwa się do przodu :3\n// [~] TODO 7 : Przygotować szablon ustawień\n// [+] TODO 8 : Zablokować możliwość edycji dni wolnych od pracy\n// [ ] TODO 9 : Automatyczne generowanie dat według kwartału ustawionego w ustawieniach\n// [+] TODO 10 : Oznaczenie świąt\n// [ ] TODO 11 : Zwracanie dnia wolnego za sobotę.\n// [!] TODO 12 : Przygotowanie modal'a z wszystkimi ustawieniami\n// [ ] TODO 13 : Ujmowanie czasu pracy pracownikom z preferencjami\n\nexport default class App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsettings: {\n\t\t\t\tmax_daily_time: 12,\t// Maksymalny dzienny czas pracy\n\t\t\t\tdaily_break: 13, // Minimalna przerwa miedzy kolejnymi zmianami\n\t\t\t\tweaky_break: 35, // minimalna przerwa w tygodniu\n\t\t\t\tfree_indexs: [ // Wpisy które ujmują 8h pracy\n\t\t\t\t\t\"NP\", \"SP\", \"L4\", \"UW\", \"DU\", \"ZZ\", \"UO\"\n\t\t\t\t],\n\t\t\t\tfree_days: {  // Ustawienia dni tygodnia, wolne i jego rodzaj\n\t\t\t\t\tsun: {\tshift: \"ND\", \tpermanent: true,\t},\n\t\t\t\t\tmon: null,\n\t\t\t\t\ttue: null,\n\t\t\t\t\twed: null,\n\t\t\t\t\tthu: null,\n\t\t\t\t\tfri: null,\n\t\t\t\t\tsat: { \tshift: \"SB\",\tpermanent: false,\t},\n\t\t\t\t},\n\t\t\t\tmin_per_shift: { // Minimalna załoga pracownicza na zmianie danego dnia\n\t\t\t\t\tsun: {\n\t\t\t\t\t\tshift_1: 0,\n\t\t\t\t\t\tshift_2: 0,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tmon: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 5,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\ttue: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\twed: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tthu: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tfri: {\n\t\t\t\t\t\tshift_1: 4,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t\tsat: {\n\t\t\t\t\t\tshift_1: 5,\n\t\t\t\t\t\tshift_2: 4,\n\t\t\t\t\t\tshift_3: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tholidays: [ // Święta ustawowo wolne\n\t\t\t\t\t{ \tdate: \"2020-01-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-01-06\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-04-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-04-13\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-03\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-05-31\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-06-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-08-15\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-11-01\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-11-11\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-12-25\", \tshift: \"WS\" \t},\n\t\t\t\t\t{ \tdate: \"2020-12-16\", \tshift: \"WS\" \t},\n\t\t\t\t],\n\t\t\t\tis_absences_layer: false,\n\t\t\t\tis_time_layer: false,\n\t\t\t\tis_shifts_layer: false,\n\t\t\t},\n\t\t\temployee_next_id: 14,\n\t\t\temployees: [\n\t\t\t\t/* {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tsignature: \"Adam Nowak\",\n\t\t\t\t\ttime_contract: 1,\n\t\t\t\t\ttime_base: 496,\n\t\t\t\t\ttime_left: 496,\n\t\t\t\t\troles: []\n\t\t\t\t}, */\n\t\t\t\t{\tid: 1,\tsignature: \"Adam Nowak\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KIEROWNIK\" ]\t},\n\t\t\t\t{\tid: 2,\tsignature: \"Hubert Lipa\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 3,\tsignature: \"Karolina Pama\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 4,\tsignature: \"Dawid Zsiadło\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"ZASTĘPCA\" ]\t},\n\t\t\t\t{\tid: 5,\tsignature: \"Andrzej Jawor\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"STARSZY KASJER\" ]\t},\n\t\t\t\t{\tid: 6,\tsignature: \"Tomasz Budyń\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 7,\tsignature: \"Joanna Kwas\",\ttime_contract: .75,\ttime_base: 372,\ttime_left: 372,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 8,\tsignature: \"Adam Małysz\",\ttime_contract: .75,\ttime_base: 372,\ttime_left: 372,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 9,\tsignature: \"Kawaii Omate\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 10,\tsignature: \"Siergiej Oli\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 11,\tsignature: \"Jan Polak\",\t\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 12,\tsignature: \"Hans Niemiec\",\ttime_contract: 1,\ttime_base: 496,\ttime_left: 496,\troles: [ \"KASJER\" ]\t},\n\t\t\t\t{\tid: 13,\tsignature: \"John States\",\ttime_contract: .5,\ttime_base: 248,\ttime_left: 248,\troles: [ \"KASJER\" ]\t},\n\t\t\t],\n\t\t\tdates: [\n\t\t\t\t\"2020-04-01\", \"2020-04-02\", \"2020-04-03\", \"2020-04-04\", \"2020-04-05\", \"2020-04-06\", \"2020-04-07\",\n\t\t\t\t\"2020-04-08\", \"2020-04-09\", \"2020-04-10\", \"2020-04-11\", \"2020-04-12\", \"2020-04-13\", \"2020-04-14\",\n\t\t\t\t\"2020-04-15\", \"2020-04-16\", \"2020-04-17\", \"2020-04-18\", \"2020-04-19\", \"2020-04-20\", \"2020-04-21\",\n\t\t\t\t\"2020-04-22\", \"2020-04-23\", \"2020-04-24\", \"2020-04-25\", \"2020-04-26\", \"2020-04-27\", \"2020-04-28\",\n\t\t\t\t\"2020-04-29\", \"2020-04-30\", \"2020-05-01\", \"2020-05-02\", \"2020-05-03\", \"2020-05-04\", \"2020-05-05\",\n\t\t\t \t\"2020-05-06\", \"2020-05-07\", \"2020-05-08\", \"2020-05-09\", \"2020-05-10\", \"2020-05-11\", \"2020-05-12\",\n\t\t\t \t\"2020-05-13\", \"2020-05-14\", \"2020-05-15\", \"2020-05-16\", \"2020-05-17\", \"2020-05-18\", \"2020-05-19\",\n\t\t\t \t\"2020-05-20\", \"2020-05-21\", \"2020-05-22\", \"2020-05-23\", \"2020-05-24\", \"2020-05-25\", \"2020-05-26\",\n\t\t\t\t\"2020-05-27\", \"2020-05-28\", \"2020-05-29\", \"2020-05-30\", \"2020-05-31\", \"2020-06-01\", \"2020-06-02\",\n\t\t\t\t\"2020-06-03\", \"2020-06-04\", \"2020-06-05\", \"2020-06-06\", \"2020-06-07\", \"2020-06-08\", \"2020-06-09\",\n\t\t\t\t\"2020-06-10\", \"2020-06-11\", \"2020-06-12\", \"2020-06-13\", \"2020-06-14\", \"2020-06-15\", \"2020-06-16\",\n\t\t\t\t\"2020-06-17\", \"2020-06-18\", \"2020-06-19\", \"2020-06-20\", \"2020-06-21\", \"2020-06-22\", \"2020-06-23\",\n\t\t\t\t\"2020-06-24\", \"2020-06-25\", \"2020-06-26\", \"2020-06-27\", \"2020-06-28\", \"2020-06-29\", \"2020-06-30\",\n\t\t\t],\n\t\t\t// preferences: [],\n\t\t\tschedules: [\n\t\t\t\t// { \temployee_id: 0, \tdate: \"03-04-2020\", \tbegin: \"06:00:00\",\t\tend: \"14:00:00\",\tpreference: false \t},\n\t\t\t],\n\t\t\tabsences: [\n\t\t\t\t// {\temployee_id: 0,\t\tdate: \"03-04-2020\",\t\tindex: \"L4\"  }\n\t\t\t]\n\t\t}\n\n\t\tthis.handleOnSaveClick = this.handleOnSaveClick.bind(this);\n\t\tthis.handleOnUploadClick = this.handleOnUploadClick.bind(this);\n\t\tthis.handleOnUploadChange = this.handleOnUploadChange.bind(this);\n\n\t\tthis.handleOnClearClick = this.handleOnClearClick.bind(this);\n\n\t\tthis.handleOnShowAbsencesClick = this.handleOnShowAbsencesClick.bind(this);\n\t\tthis.handleOnShowTimeClick = this.handleOnShowTimeClick.bind(this);\n\n\t\tthis.handleOnUndoClick = this.handleOnUndoClick.bind(this);\n\t\tthis.handleOnRedoClick = this.handleOnRedoClick.bind(this);\n\n\t\tthis.handleOnNewEmployee = this.handleOnNewEmployee.bind(this);\n\n\t\tthis.handleOnScheduleBeginChange = this.handleOnScheduleBeginChange.bind(this);\n\t\tthis.handleOnScheduleEndChange = this.handleOnScheduleEndChange.bind(this);\n\t\t// this.pushSchedule = this.pushSchedule.bind(this);\n\t}\n\n\tvalidateAllSchedules = () => {\n\t\tfor ( const employee of this.state.employees ) {\n\t\t\tthis.validateEmployeeSchedules( employee.id );\n\t\t}\n\t}\n\n\t// Tu trzeba będzie zrobić tak żeby sprawdzało tylko dla jednego pracownika bo to szkoda zachodu na niezainteresowanych\n\tvalidateEmployeeSchedules = (employee_id) => {\n\n\t\t// Poprawność leksykalna wpisu\n\t\tconst schedules_temp = [ ...this.state.schedules ].filter(schedule => { return ( schedule.employee_id === employee_id ) } );\n\t\tfor ( const schedule of schedules_temp ) {\n\t\t\tschedule.validation.is_valid = true;\n\n\t\t\tlet scheduleBegin = schedule.begin;\n\t\t\tlet scheduleEnd = schedule.end;\n\n\t\t\tif ( ! ( Helpers.timeValidator( scheduleBegin ) || Helpers.shiftValidator( scheduleBegin ) ) ) {\n\t\t\t\tschedule.validation.is_valid = false;\n\t\t\t\tschedule.validation.reason = \"Nieprawidłowy format czasu.\"\n\t\t\t}\n\n\t\t\tif ( Helpers.timeValidator( scheduleBegin ) && ! Helpers.timeValidator( scheduleEnd ) ) {\n\t\t\t\tschedule.validation.is_valid = false;\n\t\t\t\tschedule.validation.reason = \"Nieprawidłowy format czasu.\"\n\t\t\t}\n\t\t}\n\n\t\t// Poprawność czasu pracy\n\t\tlet preventSchedule = null;\n\t\tlet currentSchedule = null;\n\t\tconst weeks = Helpers.wodge( [ ...this.state.dates ], 7, 1);\n\t\tfor ( const week of weeks ) {\n\n\t\t\tlet isWeeklyBreak = false;\n\t\t\tlet schedulesGap = 0; // To jest potrzebne bo jak jest w tygodniu tylko jedna zmiana nie wyłapie że pozostałe 6 dni zaspokaja przerwe 35h\n\t\t\tfor ( const date of week ) {\n\t\t\t\tlet isDailyBreak = false; // Przerwa między dniami pracy\n\n\t\t\t\tif ( currentSchedule ) {\n\t\t\t\t\tpreventSchedule = currentSchedule;\n\t\t\t\t}\n\n\t\t\t\tcurrentSchedule = schedules_temp.find(schedule => { return ( schedule.date == date && Helpers.timeValidator( schedule.begin ) && Helpers.timeValidator( schedule.end ) ) } ) || null;\n\t\t\t\tif ( currentSchedule == null ) {\n\t\t\t\t\tschedulesGap += 1;\n\t\t\t\t\tif ( schedulesGap >= 2 ) {\n\t\t\t\t\t\tisWeeklyBreak = true;\n\t\t\t\t\t\tschedulesGap = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tschedulesGap = 0;\n\t\t\t\t}\n\n\t\t\t\t// Walidacja czasu pracy na jednej zmianie\n\t\t\t\tif ( currentSchedule ) {\n\t\t\t\t\tlet currentScheduleBegin = moment(date + \" \" + currentSchedule.begin)\n\t\t\t\t\tlet currentScheduleEnd = moment(date + \" \" + currentSchedule.end)\n\n\t\t\t\t\tif ( currentScheduleEnd.diff(currentScheduleBegin) <= 0 ) {\n\t\t\t\t\t\tcurrentScheduleEnd.add(1, 'days');\n\t\t\t\t\t}\n\n\t\t\t\t\tlet diff = moment.duration( currentScheduleEnd.diff( currentScheduleBegin ) ).asHours();\n\t\t\t\t\tif ( diff - this.state.settings.max_daily_time > 0 ) {\n\t\t\t\t\t\tcurrentSchedule.validation.is_valid = false;\n\t\t\t\t\t\tcurrentSchedule.validation.reason = \"Przekroczono limit czasu pracy.\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Walidacja między kolejnymi dniami\n\t\t\t\tif ( preventSchedule && ( currentSchedule != preventSchedule ) ) { // Wiem że to poroniona akcaj ( currentSchedule != preventSchedule ) ale z racji że w tygodniu musze sprawdzic też 8 dzień to inaczej sie nieda :(\n\t\t\t\t\tlet preventScheduleEnd = moment(preventSchedule.date + \" \" + preventSchedule.end);\n\t\t\t\t\tlet currentScheduleBegin = moment(date + \" \" + \"24:00\");;\n\t\t\t\t\tif ( currentSchedule ) {\n\t\t\t\t\t\tcurrentScheduleBegin = moment(currentSchedule.date + \" \" + currentSchedule.begin);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet diff = moment.duration( currentScheduleBegin.diff( preventScheduleEnd ) ).asHours();\n\t\t\t\t\tif ( diff - this.state.settings.weaky_break >= 0 ) {\n\t\t\t\t\t\tisWeeklyBreak = true;\n\t\t\t\t\t\tisDailyBreak = true;\n\t\t\t\t\t} else if ( diff - this.state.settings.daily_break >= 0 ) {\n\t\t\t\t\t\tisDailyBreak = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! isDailyBreak ) {\n\t\t\t\t\t\tcurrentSchedule.validation.is_valid = false;\n\t\t\t\t\t\tcurrentSchedule.validation.reason = \"Brak przerwy 13h.\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! isWeeklyBreak ) {\n\t\t\t\tfor ( const date of week ) {\n\t\t\t\t\tlet schedule = schedules_temp.find(schedule => { return ( schedule.date == date ) } ) || null;\n\t\t\t\t\tif ( schedule ) {\n\t\t\t\t\t\tschedule.validation.is_valid = false;\n\t\t\t\t\t\tschedule.validation.reason = \"Brak przerwy 35h.\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.forceUpdate();\n\t}\n\n\thandleOnSaveClick() {\n\t\tconst element = document.createElement(\"a\");\n\t\tconst file = new Blob([JSON.stringify(this.state)], {type: 'application/json'});\n\t\telement.href = URL.createObjectURL(file);\n\t\telement.download = format.asString('dd-MM-yyyy hh:mm', new Date());\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t}\n\n\n\thandleOnUploadClick() {\n\t\tthis.refs.fileUploader.click();\n\t}\n\n\thandleOnUploadChange(e) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = ((reader) => {\n\t\t\treturn () => {\n\t\t\t\tconst json = JSON.parse(reader.result);\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsettings: json.settings,\n\t\t\t\t\temployees: json.employees,\n\t\t\t\t\temployee_next_id: json.employee_next_id,\n\t\t\t\t\tschedules: json.schedules,\n\t\t\t\t\tabsences: json.absences,\n\t\t\t\t} );\n\t\t\t}\n\t\t})(reader);\n\n\t\treader.readAsText(e.target.files[0]);\n\t}\n\n\thandleOnGenerateClick = () => {\n\t\tthis.state.schedules = this.state.schedules.filter(schedule => { return ( schedule.preference === true ) })\n\t\tconst schedules = this.state.schedules;\n\n\t\tconst weeks = Helpers.chunk([...this.state.dates], 7);\n\t\tconst employees = this.state.employees;\n\t\tconst free_days = this.state.settings.free_days;\n\t\tfor ( const index in free_days ) {\n\t\t\tif ( free_days[index] !== null ) free_days[index].left = 0;\n\t\t}\n\t\tfor ( const employee of employees ) {\n\t\t\temployee.free_days = Helpers.duplicate( free_days );\n\t\t\temployee.time_left = employee.time_base;\n\t\t}\n\n\t\tfor ( const week of weeks ) {\n\n\t\t\tfor ( const employee of employees ) {\n\t\t\t\tfor ( const date of week ) {\n\t\t\t\t\tif ( employee.free_days[ Helpers.getDayName(date) ] !== null ) employee.free_days[ Helpers.getDayName(date) ].left += 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( const date of week ) {\n\n\t\t\t\tconst preferences = schedules.filter(schedule => { return ( schedule.date === date && schedule.preference === true ) } );\n\n\t\t\t\tconst free_day = this.state.settings.free_days[ Helpers.getDayName(date) ];\n\t\t\t\tif ( free_day !== null ) {\n\t\t\t\t\tif ( free_day.permanent === true ) {\n\t\t\t\t\t\tfor ( const employee of employees ) {\n\t\t\t\t\t\t\tlet schedule = preferences.find( schedule => { return ( schedule.employee_id === employee.id && schedule.date === date ) } ) || null;\n\t\t\t\t\t\t\tif ( schedule === null ) {\n\t\t\t\t\t\t\t\temployee.free_days[ Helpers.getDayName(date) ].left -= 1;\n\t\t\t\t\t\t\t\tthis.state.schedules.push( { employee_id: employee.id, date: date, begin: free_day.shift, end: null, preference: false, validation: { is_valid: true, reason: null } } );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst holiday = this.state.settings.holidays.find( holiday => { return ( holiday.date == date ) }) || null;\n\t\t\t\tif ( holiday !== null ) {\n\t\t\t\t\tfor ( const employee of employees ) {\n\t\t\t\t\t\tlet schedule = preferences.find( schedule => { return ( schedule.employee_id === employee.id && schedule.date === date ) } ) || null;\n\t\t\t\t\t\tif ( schedule === null ) {\n\t\t\t\t\t\t\tthis.state.schedules.push( { employee_id: employee.id, date: date, begin: holiday.shift, end: null, preference: false, validation: { is_valid: true, reason: null } } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet schedules_shift_1 = preferences.filter( schedule => { return ( schedule.begin === \"1\" || schedule.begin === \"5:45\" ) } ).map( schedule => { schedule.begin = \"6:00\"; schedule.end = \"14:00\"; } ) || [];\n\t\t\t\tlet schedules_shift_2 = preferences.filter( schedule => { return ( schedule.begin === \"2\" || schedule.begin === \"13:45\" ) } ).map( schedule => { schedule.begin = \"14:00\"; schedule.end = \"22:00\"; } ) || [];\n\t\t\t\tlet schedules_shift_3 = preferences.filter( schedule => { return ( schedule.begin === \"3\" || schedule.begin === \"21:45\" ) } ).map( schedule => { schedule.begin = \"22:00\"; schedule.end = \"6:00\"; } ) || [];\n\n\t\t\t\tlet employees_with_preferences_id = preferences.map(schedule => { return schedule.employee_id } );\n\n\t\t\t\tlet available_managers = employees.filter(employee => { return ( ! employees_with_preferences_id.includes( employee.id ) && ( employee.roles.includes(\"KIEROWNIK\") || employee.roles.includes(\"ZASTĘPCA\") ) ) } );\n\t\t\t\tlet available_employees = employees.filter(employee => { return ( ! employees_with_preferences_id.includes( employee.id ) && ( employee.roles.includes(\"KASJER\") || employee.roles.includes(\"STARSZY KASJER\") ) ) } );\n\n\t\t\t\tconsole.log( {available_managers}, {available_employees });\n\n\t\t\t\tif ( schedules_shift_1.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_1 ) {\n\t\t\t\t\tconst employee = this.getMostBored( available_managers );\n\t\t\t\t\temployee.time_left -= 8.5;\n\n\t\t\t\t\tlet index = available_managers.indexOf( employee );\n\t\t\t\t\tavailable_managers.splice(index, 1);\n\n\t\t\t\t\tconst schedule = { employee_id: employee.id, date: date, begin: \"5:45\", end: \"14:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t\tschedules_shift_1.push( schedule );\n\t\t\t\t\tthis.state.schedules.push( schedule );\n\t\t\t\t}\n\n\t\t\t\tif ( schedules_shift_2.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_2 ) {\n\t\t\t\t\tconst employee = this.getMostBored( available_managers );\n\t\t\t\t\temployee.time_left -= 8.5;\n\n\t\t\t\t\tlet index = available_managers.indexOf( employee );\n\t\t\t\t\tavailable_managers.splice(index, 1);\n\n\t\t\t\t\tconst schedule = { employee_id: employee.id, date: date, begin: \"13:45\", end: \"22:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t\tschedules_shift_2.push( schedule );\n\t\t\t\t\tthis.state.schedules.push( schedule );\n\t\t\t\t}\n\n\t\t\t\tfor ( const employee of available_managers ) {\n\t\t\t\t\tavailable_employees.push( employee );\n\t\t\t\t}\n\n\t\t\t\t// if ( schedules_shift_3.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_3 ) {\n\t\t\t\t// \tconst employee = this.getMostBored( available_managers );\n\t\t\t\t// \temployee.time_left -= 8.5;\n\t\t\t\t//\n\t\t\t\t// \tlet index = available_managers.indexOf( employee );\n\t\t\t\t// \tavailable_managers.splice(index, 1);\n\t\t\t\t//\n\t\t\t\t// \tconst schedule = { employee_id: employee.id, date: date, begin: \"21:45\", end: \"6:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t// \tschedules_shift_3.push( schedule );\n\t\t\t\t// \tthis.state.schedules.push( schedule );\n\t\t\t\t// }\n\n\t\t\t\twhile ( schedules_shift_1.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_1 ) {\n\t\t\t\t\tif ( available_employees.length === 0 ) break;\n\n\t\t\t\t\tconst employee = this.getMostBored( available_employees );\n\t\t\t\t\temployee.time_left -= 8.5;\n\n\t\t\t\t\tlet index = available_employees.indexOf( employee );\n\t\t\t\t\tavailable_employees.splice(index,1)\n\n\t\t\t\t\tconst schedule = { employee_id: employee.id, date: date, begin: \"5:45\", end: \"14:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t\tschedules_shift_1.push( schedule );\n\t\t\t\t\tthis.state.schedules.push( schedule );\n\t\t\t\t}\n\n\t\t\t\twhile ( schedules_shift_2.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_2 ) {\n\t\t\t\t\tif ( available_employees.length === 0 ) break;\n\n\t\t\t\t\tconst employee = this.getMostBored( available_employees );\n\t\t\t\t\temployee.time_left -= 8.5;\n\n\t\t\t\t\tlet index = available_employees.indexOf( employee );\n\t\t\t\t\tavailable_employees.splice(index,1)\n\n\t\t\t\t\tconst schedule = { employee_id: employee.id, date: date, begin: \"13:45\", end: \"22:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t\tschedules_shift_2.push( schedule );\n\t\t\t\t\tthis.state.schedules.push( schedule );\n\t\t\t\t}\n\n\t\t\t\t// while ( schedules_shift_3.length < this.state.settings.min_per_shift[ Helpers.getDayName(date) ].shift_3 ) {\n\t\t\t\t// \tif ( available_employees.length === 0 ) break;\n\t\t\t\t//\n\t\t\t\t// \tconst employee = this.getMostBored( available_employees );\n\t\t\t\t// \temployee.time_left -= 8.5;\n\t\t\t\t//\n\t\t\t\t// \tlet index = available_employees.indexOf( employee );\n\t\t\t\t// \tavailable_employees.splice(index,1)\n\t\t\t\t//\n\t\t\t\t// \tconst schedule = { employee_id: employee.id, date: date, begin: \"21:45\", end: \"6:15\", preference: false, validation: { is_valid: true, reason: null } };\n\t\t\t\t// \tschedules_shift_3.push( schedule );\n\t\t\t\t// \tthis.state.schedules.push( schedule );\n\t\t\t\t// }\n\n\t\t\t\tfor ( const employee of available_employees ) {\n\t\t\t\t\tlet shift = \"W\";\n\t\t\t\t\tfor ( const index in employee.free_days ) {\n\t\t\t\t\t\tif ( employee.free_days[index] !== null ) {\n\t\t\t\t\t\t\tif ( ( employee.free_days[index].permanent === true && employee.free_days[index].left > 1 ) ||\n\t\t\t\t\t\t\t\t ( employee.free_days[index].permanent === false && employee.free_days[index].left > 0 ) ) {\n\t\t\t\t\t\t\t\t shift = employee.free_days[index].shift;\n\t\t\t\t\t\t\t\t employee.free_days[index].left -= 1;\n\t\t\t\t\t\t\t\t break;\n\t\t\t\t \t\t \t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.state.schedules.push( { employee_id: employee.id, date: date, begin: shift, end: null, preference: false, validation: { is_valid: true, reason: null } } );\n\t\t\t\t}\n\n\t\t\t\t// for ( const employee of employees_no_preferences ) {\n\t\t\t\t// \tlet shift = \"W\";\n\t\t\t\t// \tfor ( const key of [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"] ) {\n\t\t\t\t// \t\tif ( !employee.free_days[key] ) continue\n\t\t\t\t// \t\tif ( ( this.state.settings.free_days[key].permanent === true && employee.free_days[key].left > 1 ) ||\n\t\t\t\t// \t\t\t ( this.state.settings.free_days[key].permanent === false && employee.free_days[key].left > 0 ) ) {\n\t\t\t\t// \t\t\tshift = employee.free_days[key].shift;\n\t\t\t\t// \t\t\temployee.free_days[key].left -= 1;\n\t\t\t\t// \t\t\tbreak;\n\t\t\t\t// \t\t}\n\t\t\t\t// \t}\n\t\t\t\t// \tschedules.push( { employee_id: employee.id, date: date, shift: shift, preference: false } );\n\t\t\t\t// }\n\t\t\t\t//\n\t\t\t\t// for ( const employee of employees_to_free ) {\n\t\t\t\t// \tschedules.push( { employee_id: employee.id, date: date, shift: \"W\", preference: false } );\n\t\t\t\t// }\n\n\n\t\t\t\t/*\n\t\t\t\t\t* Tych z preferencjami trzeba podzielić na 3 kategorie\n\t\t\t\t\t* 1 zmiana\n\t\t\t\t\t* 2 zmiana\n\t\t\t\t\t* 3 zmiana\n\t\t\t\t\t* jeżeli maja wpisany czas pracy a nie zmiany\n\t\t\t\t\t* to trzeba przeliczyć czy ten czas miesci sie w ramach\n\t\t\t\t\t* jakiejs zmiany, jezeli jego czas trwania w min 75%\n\t\t\t\t\t* pokrywa sie z dana zmiana to jest on liczony jako ta zmiana\n\t\t\t\t\t* moze sie zdazyc tak ze pracownik pokryje dwie zmiany\n\t\t\t\t*/\n\n\t\t\t\t/*\n\t\t\t\t\t6:00 - 14:00 Pierwsza zmiana\n\t\t\t\t\t14:00 - 22:00 Druga zmiana\n\t\t\t\t\t22:00 - 8:00 Trzecia zmiana\n\t\t\t\t*/\n\n\t\t\t\t/*\n\t\t\t\t\tPrzykładowy czas pracy:\n\t\t\t\t\t8:00 - 20:00 zajmuje min 75% czasu pierwszej zmiany\n\t\t\t\t\ti min 75% czasu drugiej zmiany, czyli jest traktowany\n\t\t\t\t\tjako pracownik, który zajmuje obie zmiany\n\t\t\t\t*/\n\n\t\t\t\t/*\n\t\t\t\t\tKrok 1 uwzglednienie jedynie cyfrowego zapisu zmian\n\t\t\t\t\tKrok 2 stworzenie funkcji sprawdzającej w ilu porcentach podany\n\t\t\t\t\t\t\tczas pracy pokrywa sie z podanym zakresem godzin\n\t\t\t\t*/\n\n\t\t\t\t// break;\n\t\t\t}\n\n\t\t\t// if(i>5)break;\n\t\t}\n\n\t\t// console.log(employees);\n\n\t\tthis.validateAllSchedules();\n\t\t// this.forceUpdate();\n\t\t// this.pushSchedules( schedules );\n\t}\n\n\tgetMostBored = (employees) => {\n\t\tif ( employees.length === 0 ) return;\n\t\tlet mostBored = employees[0];\n\t\tfor ( const employee of employees ) {\n\t\t\tif ( mostBored.time_left / mostBored.time_base < employee.time_left / employee.time_base ) {\n\t\t\t\tmostBored = employee;\n\t\t\t}\n\t\t}\n\t\treturn mostBored\n\t}\n\n\thandleOnClearClick() {\n\t\tthis.setState( { schedules: [ ]} )\n\t}\n\n\thandleOnShowAbsencesClick() {\n\t\tlet settings_temp = { ...this.state.settings }\n\t\tsettings_temp.is_absences_layer = !settings_temp.is_absences_layer;\n\t\tsettings_temp.is_time_layer = false;\n\t\tthis.setState( { settings: { ...settings_temp } } );\n\t}\n\n\thandleOnShowTimeClick() {\n\t\tlet settings_temp = { ...this.state.settings }\n\t\tsettings_temp.is_time_layer = !settings_temp.is_time_layer;\n\t\tsettings_temp.is_absences_layer = false;\n\t\tsettings_temp.is_shifts_layer = false;\n\t\tthis.setState( { settings: { ...settings_temp } } );\n\t}\n\n\thandleOnShowShiftsClick() {\n\t\tlet settings_temp = { ...this.state.settings }\n\t\tsettings_temp.is_time_layer = !settings_temp.is_time_layer;\n\t\tsettings_temp.is_absences_layer = false;\n\t\tthis.setState( { settings: { ...settings_temp } } );\n\t}\n\n\thandleOnUndoClick() { }\n\n\thandleOnRedoClick() { }\n\n\thandleOnNewEmployee(e) {\n\t\tif (e.key === \"Enter\") {\n\t\t\tconst start_time = () => {\n\t\t\t\tlet time = 0;\n\t\t\t\tconst weeks = Helpers.chunk([...this.state.dates], 7);\n\t\t\t\tfor ( const week of weeks ) {\n\t\t\t\t\tfor ( const date of week ) {\n\t\t\t\t\t\tlet free_day = this.state.settings.free_days[ Helpers.getDayName(date) ];\n\t\t\t\t\t\tlet holiday = this.state.settings.holidays.find( holiday => { return ( holiday.date == date ) } )\n\t\t\t\t\t\tif ( !free_day && !holiday ) time += 8 /* base = 8, time_constract = 1 */;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet time_base = start_time();\n\n\t\t\tconst employee = {\n\t\t\t\tid: this.state.employee_next_id,\n\t\t\t\tsignature: e.target.value,\n\t\t\t\ttime_contract: 1,\n\t\t\t\ttime_base: time_base,\n\t\t\t\ttime_left: time_base,\n\t\t\t\troles: []\n\t\t\t}\n\n\t\t\tthis.setState( { employees: [ ...this.state.employees, employee], employee_next_id: this.state.employee_next_id + 1 } );\n\t\t\te.target.value = \"\";\n\t\t}\n\t}\n\n\thandleOnScheduleBeginChange(e) {\n\t\tlet employee_id = e.target.getAttribute('data-employee-id');\n\n\t\tlet schedules_temp = [ ...this.state.schedules ]\n\t\tschedules_temp = schedules_temp.filter(schedule => { return !(\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tlet schedule_temp = [ ...this.state.schedules ].find(schedule => { return (\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tif ( e.target.value != \"\" ) {\n\t\t\tconst schedule = {\n\t\t\t\temployee_id: parseInt( employee_id ),\n\t\t\t\tdate: e.target.getAttribute('data-date-id'),\n\t\t\t\tbegin: e.target.value.toUpperCase(),\n\t\t\t\tend: ( schedule_temp ) ? schedule_temp.end : \"\",\n\t\t\t\tpreference: true,\n\t\t\t\tvalidation: {\n\t\t\t\t\tis_valid: true,\n\t\t\t\t\t// reason: \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState( { schedules: [ ...schedules_temp, schedule ] }, () => this.validateEmployeeSchedules( parseInt( employee_id ) ) );\n\t\t} else {\n\t\t\tthis.setState( { schedules: [ ...schedules_temp ] }, () => this.validateEmployeeSchedules( parseInt( employee_id ) ) );\n\t\t}\n\t}\n\n\thandleOnScheduleEndChange(e) {\n\t\tlet employee_id = e.target.getAttribute('data-employee-id');\n\n\t\tlet schedules_temp = [ ...this.state.schedules ].filter(schedule => { return !(\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\n\t\tlet schedule = [ ...this.state.schedules ].find(schedule => { return (\n\t\t\tschedule.employee_id == employee_id &&\n\t\t\tschedule.date == e.target.getAttribute('data-date-id')\n\t\t)});\n\t\tschedule.end = e.target.value;\n\t\tschedule.preference = true;\n\n\t\tthis.setState( { schedules: [ ...schedules_temp, schedule ] }, () => this.validateEmployeeSchedules( parseInt( employee_id ) ) );\n\t}\n\n\t// pushSchedule( p_schedule ) { }\n\n\t// pushSchedules( p_schedules ) { }\n\n\n\n\t// <button className=\"btn btn-outline-primary font-weight-bold mr-2\" type=\"button\">Pokaż preferencje</button>\n\t// <button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearPreferencesClick }>Usuń preferencje</button>\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<nav className=\"navbar navbar-light bg-light\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<SettingsManager settings={ this.state.settings } />\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnSaveClick }>Zapisz</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnUploadClick }>Wczytaj</button>\n\t\t\t\t    \t<button className=\"btn btn-outline-success font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnGenerateClick }>Generuj plan pracy</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-danger font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnClearClick }>Wyczyść plan pracy</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-info font-weight-bold mr-2\" type=\"button\" onClick={ this.handleOnShowAbsencesClick }>\n\t\t\t\t\t\t\t{ ( this.state.settings.is_absences_layer === false ) ? \"Pokaż absencje\" : \"Ukryj absencje\" }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-info font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnShowTimeClick }>\n\t\t\t\t\t\t\t{ ( this.state.settings.is_time_layer === false ) ? \"Pokaż czas pracy\" : \"Ukryj czas pracy\" }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-info font-weight-bold mr-4\" type=\"button\" onClick={ this.handleOnShowShiftsClick }>\n\t\t\t\t\t\t\t{ ( this.state.settings.is_shifts_layer === false ) ? \"Pokaż zmiany\" : \"Ukryj zmiany\" }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\">Cofnij</button>\n\t\t\t\t    \t<button className=\"btn btn-outline-dark font-weight-bold mr-2\" type=\"button\">Przywróć</button>\n\t\t\t\t\t\t<input ref=\"fileUploader\" className=\"d-none\" type=\"file\" onChange={ this.handleOnUploadChange }/>\n\t\t\t\t\t</form>\n\t\t\t\t</nav>\n\t\t\t\t<EmployeesTableManager settings={ this.state.settings } employees={this.state.employees} dates={this.state.dates} schedules={this.state.schedules} onNewEmployee={this.handleOnNewEmployee} onScheduleBeginChange={this.handleOnScheduleBeginChange} onScheduleEndChange={this.handleOnScheduleEndChange}/>\n\t\t\t</>\n\t    );\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}