{"ast":null,"code":"const moment = require('moment');\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SETTINGS':\n      {\n        return { ...state\n        };\n      }\n\n    case 'SAVE':\n      {\n        const file = new Blob([JSON.stringify(state)], {\n          type: 'application/json'\n        }) || null;\n        const element = document.createElement(\"a\");\n        element.href = URL.createObjectURL(file);\n        element.download = moment().format(\"YYYY-MM-DD HH:mm:ss\") || \"CarrotHR - ZAPIS\";\n        document.body.appendChild(element);\n        element.click();\n        return { ...state\n        };\n      }\n\n    case 'LOADED':\n      {\n        console.log(\"SIUSIAK\");\n        var reader = new FileReader();\n\n        reader.onload = (reader => {\n          return () => {\n            const json = JSON.parse(reader.result);\n            state.schedule = json.schedules;\n            console.log(state);\n            return { ...state\n            };\n          };\n        })(reader);\n\n        reader.readAsText(action.file);\n        return { ...state\n        };\n      }\n\n    case 'GENERATE':\n      {\n        let schedules = state.schedules.slice();\n        schedules.push({\n          id: 'XC2ad-aw@23a;2#;bTEr[21BvcD]',\n          status: 'success'\n        });\n        return { ...state,\n          schedules\n        };\n      }\n\n    case 'CLEAR':\n      {\n        let schedules = state.schedules.slice();\n        schedules.length = 0;\n        return { ...state,\n          schedules\n        };\n      }\n\n    case 'ABSENCES':\n      {\n        state.settings.is_absences_layer = !state.settings.is_absences_layer;\n        state.settings.is_time_layer = false;\n        return { ...state\n        };\n      }\n\n    case 'WORK_TIME':\n      {\n        state.settings.is_absences_layer = false;\n        state.settings.is_time_layer = !state.settings.is_time_layer;\n        return { ...state\n        };\n      }\n\n    case 'UNDO':\n      {\n        return { ...state\n        };\n      }\n\n    case 'REDO':\n      {\n        return { ...state\n        };\n      }\n\n    default:\n      return state;\n  }\n}; // export default reducer;","map":{"version":3,"sources":["/home/tomek/projects/carrot-hr/src/reducers/navigation.js"],"names":["moment","require","reducer","state","action","type","file","Blob","JSON","stringify","element","document","createElement","href","URL","createObjectURL","download","format","body","appendChild","click","console","log","reader","FileReader","onload","json","parse","result","schedule","schedules","readAsText","slice","push","id","status","length","settings","is_absences_layer","is_time_layer"],"mappings":"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","sourcesContent":["const moment = require('moment')\n\nconst reducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'SETTINGS': {\n\t\t\treturn { ...state };\n\t\t}\n\t\tcase 'SAVE': {\n\t\t\tconst file = new Blob( [ JSON.stringify( state ) ], { type: 'application/json' } ) || null;\n\n\t\t\tconst element = document.createElement(\"a\");\n\t\t\telement.href = URL.createObjectURL( file );\n\t\t\telement.download = moment().format(\"YYYY-MM-DD HH:mm:ss\") || \"CarrotHR - ZAPIS\";\n\t\t\tdocument.body.appendChild(element);\n\t\t\telement.click();\n\n\t\t\treturn { ...state };\n\t\t}\n\t\tcase 'LOADED': {\n\t\t\tconsole.log(\"SIUSIAK\")\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = ((reader) => {\n\t\t\t\treturn () => {\n\t\t\t\t\tconst json = JSON.parse(reader.result);\n\t\t\t\t\tstate.schedule = json.schedules\n\t\t\t\t\tconsole.log(state)\n\t\t\t\t\treturn { ...state }\n\t\t\t\t}\n\t\t\t})(reader);\n\t\t\treader.readAsText(action.file);\n\t\t\treturn { ...state };\n\t\t}\n\t\tcase 'GENERATE': {\n\t\t\tlet schedules = state.schedules.slice()\n\t\t\tschedules.push({ id: 'XC2ad-aw@23a;2#;bTEr[21BvcD]', status: 'success' })\n\t\t\treturn { ...state, schedules }\n\t\t}\n\t\tcase 'CLEAR': {\n\t\t\tlet schedules = state.schedules.slice()\n\t\t\tschedules.length = 0\n\t\t\treturn { ...state, schedules }\n\t\t}\n\t\tcase 'ABSENCES': {\n\t\t\tstate.settings.is_absences_layer = ! state.settings.is_absences_layer\n\t\t\tstate.settings.is_time_layer = false\n\t\t\treturn { ...state }\n\t\t}\n\t\tcase 'WORK_TIME': {\n\t\t\tstate.settings.is_absences_layer = false\n\t\t\tstate.settings.is_time_layer = ! state.settings.is_time_layer\n\t\t\treturn { ...state }\n\t\t}\n\t\tcase 'UNDO': {\n\t\t\treturn { ...state }\n\t\t}\n\t\tcase 'REDO': {\n\t\t\treturn { ...state }\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\n// export default reducer;\n"]},"metadata":{},"sourceType":"module"}