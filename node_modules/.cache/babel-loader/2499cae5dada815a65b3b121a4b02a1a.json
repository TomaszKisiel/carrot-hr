{"ast":null,"code":"var _jsxFileName = \"/home/tomek/Social_Media/CarrotStudio/CarrotHR/src/Components/EmployeesTableManager.js\";\nimport React, { Component } from 'react';\n\nconst format = require('date-format');\n\nconst moment = require('moment');\n\nconst momentDurationFormatSetup = require(\"moment-duration-format\");\n\nconst days = [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"];\n\nlet getDayName = date => {\n  let dt = new Date(date);\n  return days[dt.getDay()];\n};\n\nconst days_PL = [\"ND\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\"];\n\nlet getPolishDayName = date => {\n  let dt = new Date(date);\n  return days_PL[dt.getDay()];\n};\n\nfunction TableHeader(props) {}\n\nfunction TableData(props) {\n  let tbody = []; // function compare(a, b) {\n  // \tconst stateA = a.is_super_manager || a.is_manager;\n  // \tconst stateB = b.is_super_manager;\n  //\n  // \tlet comparison = 0;\n  // \tif (stateA > stateB) {\n  // \t\tcomparison = 1;\n  // \t} else if (stateA < stateB) {\n  // \t\tcomparison = -1;\n  // \t}\n  // \treturn (comparison * -1)\n  // }\n  //\n  // props.employees.sort(compare)\n\n  for (const [i, employee] of props.employees.entries()) {\n    const tr = [];\n    tr.push( /*#__PURE__*/React.createElement(\"th\", {\n      className: \"align-middle\",\n      key: \"number-\" + employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }\n    }, i + 1));\n    tr.push( /*#__PURE__*/React.createElement(\"th\", {\n      className: \"border-right align-middle\",\n      key: \"signature-\" + employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, employee.signature));\n\n    for (const date of props.dates) {\n      const schedule = props.schedules.find(schedule => {\n        return schedule.employee_id == employee.id && schedule.date == date;\n      });\n      let begin = schedule ? schedule.begin : \"\";\n      let end = schedule ? schedule.end : \"\";\n\n      if (props.settings.is_absences_layer === true) {} else if (props.settings.is_time_layer === true) {\n        let time = \"\";\n        let tdClassName = \"border-right py-1 align-middle\";\n        if (getDayName(date) == \"sun\") tdClassName += \" carrotHR__field--sunday\";\n        let timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\n\n        if (begin && ![\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin) && timeValidator.test(begin)) {\n          let beginDate = moment(date + \" \" + begin);\n          let endDate = moment(date + \" \" + end); // let diff = Math.abs(endDate.getTime() - beginDate.getTime());\n          // if ( diff / 36e5 > 12 ) tdClassName += \" carrotHR__field--warning\"; // Pracuje za długo\n          // moment.duration( endDate.diff( beginDate ) ).asHours();\n\n          time = moment.duration(endDate.diff(beginDate)).format(\"H:mm\");\n        } else if (begin && [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin)) {\n          time = begin;\n        }\n\n        let inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\n        tr.push( /*#__PURE__*/React.createElement(\"td\", {\n          id: employee.id + \":\" + date,\n          key: employee.id + \":\" + date,\n          className: tdClassName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          value: time,\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 7\n          }\n        })));\n      } else {\n        let isBeginProperlyFormated = true;\n        let timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\n\n        if (begin && ![\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin)) {\n          if (!timeValidator.test(begin)) {\n            isBeginProperlyFormated = false;\n          }\n        }\n\n        let tdClassName = \"border-right py-1 align-middle\";\n        if (getDayName(date) == \"sun\") tdClassName += \" carrotHR__field--sunday\";\n        if (schedule && schedule.preference) tdClassName += \" carrotHR__field--preference\";\n        if (props.settings.holidays.find(holiday => {\n          return holiday.date == date;\n        })) tdClassName += \" carrotHR__field--holiday\";\n        if (isBeginProperlyFormated === false) tdClassName += \" carrotHR__field--warning\";\n        let inputClassName = \"carrotHR__input carrotHR__input--shift form-control\"; // <input data-date-id={date} data-employee-id={employee.id} className={ endInputClassName } onChange={ (e) => props.onScheduleChange(e, \"end\") } value={ end } />\n\n        tr.push( /*#__PURE__*/React.createElement(\"td\", {\n          id: employee.id + \":\" + date,\n          key: employee.id + \":\" + date,\n          className: tdClassName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          onChange: props.onScheduleBeginChange,\n          value: begin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 7\n          }\n        }), begin && isBeginProperlyFormated && ![\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes(begin) ? /*#__PURE__*/React.createElement(\"input\", {\n          \"data-date-id\": date,\n          \"data-employee-id\": employee.id,\n          className: inputClassName,\n          onChange: props.onScheduleEndChange,\n          value: end,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 8\n          }\n        }) : \"\"));\n      }\n    }\n\n    let trClassName = \"\"; // if ( employee.is_super_manager == true ) trClassName += \" carrotHR__row--super-manager\"\n    // if ( employee.is_manager == true ) trClassName += \" carrotHR__row--manager\"\n\n    tbody.push( /*#__PURE__*/React.createElement(\"tr\", {\n      class: trClassName,\n      key: employee.id,\n      draggable: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 14\n      }\n    }, tr));\n  }\n\n  return tbody;\n}\n\nfunction TableNewRow(props) {\n  const tr = [];\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    key: \"order-new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 10\n    }\n  }, \"#\"));\n  tr.push( /*#__PURE__*/React.createElement(\"th\", {\n    key: \"signature-new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    key: \"signature-input-new\",\n    onKeyDown: props.onNewEmployee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 34\n    }\n  })));\n\n  for (const date of props.dates) {\n    tr.push( /*#__PURE__*/React.createElement(\"td\", {\n      key: date,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    key: \"signature-tr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, tr);\n}\n\nexport default class EmployeesTableManager extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  tableHeader() {}\n\n  tableData() {}\n\n  tableNewRow() {}\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"table\", {\n      className: \"carrotHR__table table table-hover table-striped mb-0 text-nowrap border-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 5\n      }\n    }, this.tableHeader()), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(TableData, {\n      settings: this.props.settings,\n      employees: this.props.employees,\n      dates: this.props.dates,\n      schedules: this.props.schedules,\n      onScheduleBeginChange: this.props.onScheduleBeginChange,\n      onScheduleEndChange: this.props.onScheduleEndChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(TableNewRow, {\n      dates: this.props.dates,\n      onNewEmployee: this.props.onNewEmployee,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/home/tomek/Social_Media/CarrotStudio/CarrotHR/src/Components/EmployeesTableManager.js"],"names":["React","Component","format","require","moment","momentDurationFormatSetup","days","getDayName","date","dt","Date","getDay","days_PL","getPolishDayName","TableHeader","props","TableData","tbody","i","employee","employees","entries","tr","push","id","signature","dates","schedule","schedules","find","employee_id","begin","end","settings","is_absences_layer","is_time_layer","time","tdClassName","timeValidator","includes","test","beginDate","endDate","duration","diff","inputClassName","isBeginProperlyFormated","preference","holidays","holiday","onScheduleBeginChange","onScheduleEndChange","trClassName","TableNewRow","onNewEmployee","EmployeesTableManager","constructor","tableHeader","tableData","tableNewRow","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nconst format = require('date-format');\r\nconst moment = require('moment');\r\nconst momentDurationFormatSetup = require(\"moment-duration-format\");\r\n\r\nconst days = [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"];\r\nlet getDayName = (date) => {\r\n\tlet dt = new Date(date);\r\n\treturn days[dt.getDay()];\r\n}\r\n\r\nconst days_PL = [\"ND\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\"];\r\nlet getPolishDayName = (date) => {\r\n\tlet dt = new Date(date);\r\n\treturn days_PL[dt.getDay()];\r\n}\r\n\r\nfunction TableHeader(props) {\r\n\t\r\n}\r\n\r\nfunction TableData(props) {\r\n\tlet tbody = []\r\n\r\n\t// function compare(a, b) {\r\n\t// \tconst stateA = a.is_super_manager || a.is_manager;\r\n\t// \tconst stateB = b.is_super_manager;\r\n\t//\r\n\t// \tlet comparison = 0;\r\n\t// \tif (stateA > stateB) {\r\n\t// \t\tcomparison = 1;\r\n\t// \t} else if (stateA < stateB) {\r\n\t// \t\tcomparison = -1;\r\n\t// \t}\r\n\t// \treturn (comparison * -1)\r\n\t// }\r\n\t//\r\n\t// props.employees.sort(compare)\r\n\r\n\tfor ( const [i, employee] of props.employees.entries() ) {\r\n\t\tconst tr = []\r\n\r\n\t\ttr.push(<th className=\"align-middle\" key={ \"number-\" + employee.id }>{ i + 1 }</th>)\r\n\t\ttr.push(<th className=\"border-right align-middle\" key={ \"signature-\" + employee.id }>{ employee.signature }</th>)\r\n\r\n\t\tfor ( const date of props.dates ) {\r\n\t\t\tconst schedule = props.schedules.find(schedule => { return (\r\n\t\t\t\tschedule.employee_id == employee.id &&\r\n\t\t\t\tschedule.date == date\r\n\t\t\t)});\r\n\r\n\t\t\tlet begin = ( schedule ) ? schedule.begin : \"\";\r\n\t\t\tlet end = ( schedule ) ? schedule.end : \"\";\r\n\r\n\t\t\tif ( props.settings.is_absences_layer === true ) {\r\n\r\n\t\t\t} else if ( props.settings.is_time_layer === true ) {\r\n\t\t\t\tlet time = \"\";\r\n\r\n\t\t\t\tlet tdClassName = \"border-right py-1 align-middle\";\r\n\t\t\t\tif ( getDayName(date) == \"sun\" ) tdClassName += \" carrotHR__field--sunday\";\r\n\r\n\t\t\t\tlet timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\r\n\t\t\t\tif ( begin && ! [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) && timeValidator.test(begin) ) {\r\n\t\t\t\t\tlet beginDate = moment(date + \" \" + begin);\r\n\t\t\t\t\tlet endDate = moment(date + \" \" + end);\r\n\r\n\t\t\t\t\t// let diff = Math.abs(endDate.getTime() - beginDate.getTime());\r\n\r\n\t\t\t\t\t// if ( diff / 36e5 > 12 ) tdClassName += \" carrotHR__field--warning\"; // Pracuje za długo\r\n\r\n\t\t\t\t\t// moment.duration( endDate.diff( beginDate ) ).asHours();\r\n\r\n\t\t\t\t\ttime = moment.duration( endDate.diff( beginDate ) ).format(\"H:mm\");\r\n\t\t\t\t} else if ( begin && [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) ) {\r\n\t\t\t\t\ttime = begin;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tlet inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\r\n\r\n\r\n\r\n\t\t\t\ttr.push(\r\n\t\t\t\t\t<td id={employee.id + \":\" + date} key={ employee.id + \":\" + date} className={ tdClassName }>\r\n\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } value={ time } disabled/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlet isBeginProperlyFormated = true;\r\n\t\t\t\tlet timeValidator = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/;\r\n\r\n\t\t\t\tif ( begin && ! [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) ) {\r\n\t\t\t\t\tif ( ! timeValidator.test( begin ) ) {\r\n\t\t\t\t\t\tisBeginProperlyFormated = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet tdClassName = \"border-right py-1 align-middle\";\r\n\t\t\t\tif ( getDayName(date) == \"sun\" ) tdClassName += \" carrotHR__field--sunday\";\r\n\t\t\t\tif ( schedule && schedule.preference ) tdClassName += \" carrotHR__field--preference\";\r\n\t\t\t\tif ( props.settings.holidays.find( holiday => { return ( holiday.date == date ) }) ) tdClassName += \" carrotHR__field--holiday\";\r\n\t\t\t\tif ( isBeginProperlyFormated === false ) tdClassName += \" carrotHR__field--warning\"\r\n\r\n\t\t\t\tlet inputClassName = \"carrotHR__input carrotHR__input--shift form-control\";\r\n\r\n\t\t\t\t// <input data-date-id={date} data-employee-id={employee.id} className={ endInputClassName } onChange={ (e) => props.onScheduleChange(e, \"end\") } value={ end } />\r\n\t\t\t\ttr.push(\r\n\t\t\t\t\t<td id={employee.id + \":\" + date} key={ employee.id + \":\" + date} className={ tdClassName }>\r\n\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } onChange={ props.onScheduleBeginChange } value={ begin } />\r\n\t\t\t\t\t\t{ ( begin && isBeginProperlyFormated && ! [\"W\", \"PN\", \"WT\", \"ŚR\", \"CZ\", \"PT\", \"SB\", \"ND\"].includes( begin ) ) ?\r\n\t\t\t\t\t\t\t<input data-date-id={date} data-employee-id={employee.id} className={ inputClassName } onChange={ props.onScheduleEndChange } value={ end } /> : \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet trClassName = \"\";\r\n\t\t// if ( employee.is_super_manager == true ) trClassName += \" carrotHR__row--super-manager\"\r\n\t\t// if ( employee.is_manager == true ) trClassName += \" carrotHR__row--manager\"\r\n\r\n\t\ttbody.push(<tr class={ trClassName } key={ employee.id } draggable>{ tr }</tr>)\r\n\t}\r\n\r\n\treturn tbody;\r\n}\r\n\r\nfunction TableNewRow(props) {\r\n\tconst tr = [];\r\n\ttr.push(<th key=\"order-new\">#</th>)\r\n\ttr.push(<th key=\"signature-new\"><input key=\"signature-input-new\" onKeyDown={ props.onNewEmployee } /></th>)\r\n\r\n\tfor ( const date of props.dates ) {\r\n\t\ttr.push(<td key={date}></td>)\r\n\t}\r\n\r\n\treturn ( <tr key=\"signature-tr\">{ tr }</tr> );\r\n}\r\n\r\nexport default class EmployeesTableManager extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\ttableHeader() {\r\n\r\n\t}\r\n\r\n\ttableData() { }\r\n\r\n\ttableNewRow() { }\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<table className=\"carrotHR__table table table-hover table-striped mb-0 text-nowrap border-top\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t{ this.tableHeader() }\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<TableData settings={ this.props.settings } employees={ this.props.employees } dates={ this.props.dates } schedules={ this.props.schedules } onScheduleBeginChange={this.props.onScheduleBeginChange} onScheduleEndChange={this.props.onScheduleEndChange}/>\r\n\t\t\t\t\t<TableNewRow dates={ this.props.dates } onNewEmployee={ this.props.onNewEmployee }/>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}